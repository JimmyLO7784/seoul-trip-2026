<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="theme-color" content="#FDFBF7">
    <meta name="format-detection" content="telephone=no">
    <title>È¶ñÁàæ 2026</title>
    
    <!-- ÂúñÁ§∫Â∫´ (ÈùûÂêåÊ≠•ËºâÂÖ•ÂÑ™Âåñ) -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" media="print" onload="this.media='all'">
    
    <!-- ÂúìÈ´îÂ≠óÂûã -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=M+PLUS+Rounded+1c:wght@400;500;700;800&display=swap" rel="stylesheet">
    
    <style>
        /* --- Ê†∏ÂøÉË®≠Ë®àÁ≥ªÁµ± (Â•∂Ëå∂Ëâ≤Á≥ª Final) --- */
        :root {
            --bg: #FDFBF7;
            --surface: #FFFFFF;
            --primary: #C8A47E;
            --primary-light: #F5EFE6;
            --text-main: #5E5046;
            --text-sub: #A3978E;
            --border: #E5E0D8;
            
            --accent-green: #88B04B; 
            --accent-red: #E08E79;
            --accent-blue: #8FB8CA;
            
            --shadow-card: 0 8px 24px rgba(149, 133, 119, 0.06);
            --shadow-float: 0 4px 12px rgba(149, 133, 119, 0.12);
            
            --safe-top: env(safe-area-inset-top, 20px);
            --safe-bottom: env(safe-area-inset-bottom, 20px);
        }

        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        
        body {
            margin: 0; padding: 0;
            background-color: var(--bg);
            color: var(--text-main);
            font-family: "M PLUS Rounded 1c", -apple-system, BlinkMacSystemFont, sans-serif;
            font-size: 15px;
            line-height: 1.6;
            overscroll-behavior-y: none; /* Èò≤Ê≠¢ iOS Ê©°ÁöÆÁ≠ãÊïàÊûú */
            user-select: none; /* Èò≤Ê≠¢ÈÄ£ÈªûÈÅ∏Âèñ */
        }

        /* --- Header --- */
        header {
            position: fixed; top: 0; left: 0; right: 0; z-index: 1000;
            background: rgba(253, 251, 247, 0.98);
            backdrop-filter: blur(12px);
            padding: calc(12px + var(--safe-top)) 24px 12px 24px;
            display: flex; justify-content: space-between; align-items: center;
            border-bottom: 1px solid rgba(0,0,0,0.03);
            transition: all 0.3s ease;
        }
        h1 { margin: 0; font-size: 20px; font-weight: 800; color: var(--text-main); letter-spacing: 1px; }
        .weather-pill {
            font-size: 12px; font-weight: 700; color: var(--text-sub);
            background: var(--surface); padding: 6px 14px; border-radius: 20px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.04); display: flex; align-items: center; gap: 6px;
            border: 1px solid var(--border); transition: all 0.3s ease;
        }

        /* --- Main --- */
        main {
            padding: calc(75px + var(--safe-top)) 20px calc(90px + var(--safe-bottom)) 20px;
            min-height: 100vh;
        }

        /* --- Day Slider --- */
        .day-slider {
            display: flex; overflow-x: auto; gap: 10px; padding-bottom: 4px;
            margin: 0 -20px 24px -20px; padding-left: 20px; padding-right: 20px;
            scrollbar-width: none; scroll-behavior: smooth;
        }
        .day-slider::-webkit-scrollbar { display: none; }
        
        .day-chip {
            flex: 0 0 auto; min-width: 68px;
            background: transparent;
            border-radius: 18px; padding: 10px 12px;
            text-align: center; cursor: pointer;
            transition: all 0.2s cubic-bezier(0.25, 0.8, 0.25, 1);
            color: var(--text-sub); border: 1px solid transparent;
        }
        .day-chip:active { transform: scale(0.95); }
        .day-chip.active {
            background: var(--surface); color: var(--primary);
            box-shadow: var(--shadow-float);
            font-weight: 800; transform: translateY(-2px);
            border-color: var(--border);
        }
        .day-chip-num { font-size: 11px; margin-bottom: 2px; opacity: 0.8; font-weight: 500; }
        .day-chip-date { font-size: 15px; }

        /* --- Card --- */
        .card {
            background: var(--surface); border-radius: 24px; padding: 24px;
            margin-bottom: 20px; box-shadow: var(--shadow-card);
            position: relative; overflow: hidden;
            transition: transform 0.2s ease;
        }
        /* Â¢ûÂä†Ëß∏ÊéßÂõûÈ•ã */
        .card:active { transform: scale(0.99); }
        
        .card-header { 
            display: flex; justify-content: space-between; align-items: flex-start; 
            margin-bottom: 14px; gap: 12px; 
        }
        .card-title { 
            font-size: 17px; font-weight: 800; color: var(--text-main); 
            line-height: 1.4; flex: 1; word-break: break-word; /* Èò≤Ê≠¢Èï∑Ê®ôÈ°åÁ†¥Áâà */
        }
        .card-header-right {
            display: flex; align-items: center; gap: 8px; flex-shrink: 0;
        }
        .card-time { 
            font-family: monospace; font-size: 12px; color: var(--text-sub);
            background: var(--primary-light); padding: 4px 8px; border-radius: 8px;
            white-space: nowrap; font-weight: 700;
        }
        .card-desc { font-size: 14px; color: var(--text-sub); margin-bottom: 16px; line-height: 1.6; font-weight: 500; }

        /* Choice Card */
        .choice-group { display: flex; flex-direction: column; gap: 10px; margin-top: 16px; }
        .choice-item {
            background: #FAFAFA; border: 1px dashed var(--border); border-radius: 12px;
            padding: 14px 16px; display: flex; justify-content: space-between; align-items: center;
            text-decoration: none; color: inherit; transition: background 0.1s;
        }
        .choice-item:active { background: #F0F0F0; }
        .choice-tag {
            font-size: 10px; font-weight: 800; color: white; background: var(--text-sub);
            padding: 3px 8px; border-radius: 6px; margin-right: 8px;
        }
        .choice-name { font-size: 14px; font-weight: 700; }

        /* Brand Tags */
        .brand-box { margin-top: 16px; padding-top: 16px; border-top: 1px dashed var(--border); }
        .brand-label { font-size: 11px; color: var(--primary); font-weight: 800; margin-bottom: 10px; display: block; letter-spacing: 1px; }
        .brand-list { display: flex; flex-wrap: wrap; gap: 8px; }
        .brand-tag {
            font-size: 12px; color: var(--text-main); font-weight: 500;
            background: var(--bg); padding: 6px 12px; border-radius: 12px;
        }

        /* Options */
        .option-group { display: flex; flex-direction: column; gap: 1px; margin-top: 16px; background: var(--bg); border-radius: 16px; border: 1px solid var(--border); overflow: hidden; }
        .option-item {
            display: flex; justify-content: space-between; align-items: center;
            padding: 14px 16px; background: var(--surface);
            text-decoration: none; color: inherit; transition: background 0.1s;
        }
        .option-item:active { background: #FAFAFA; }
        .option-name { font-weight: 700; font-size: 14px; color: var(--text-main); }
        .option-meta { display: flex; align-items: center; gap: 8px; }

        /* Badges */
        .badge { font-size: 11px; padding: 4px 8px; border-radius: 8px; font-weight: 700; letter-spacing: 0.5px; white-space: nowrap; }
        .badge.app { color: #B45309; background: #FFF7ED; }
        .badge.res { color: #047857; background: #ECFDF5; }
        .badge.walk { color: #BE123C; background: #FFF1F2; }

        /* Buttons */
        .btn-naver {
            display: inline-flex; align-items: center; justify-content: center;
            width: 32px; height: 32px; border-radius: 50%;
            background: var(--surface); color: var(--accent-green);
            box-shadow: 0 2px 6px rgba(0,0,0,0.05); border: 1px solid rgba(0,0,0,0.05);
            font-size: 14px; flex-shrink: 0; text-decoration: none; transition: transform 0.1s;
        }
        .btn-naver:active { transform: scale(0.9); }
        
        .btn-copy {
            background: transparent; border: none; font-size: 12px; color: var(--text-sub);
            cursor: pointer; padding: 4px 8px;
        }
        .btn-copy:active { opacity: 0.5; }

        /* --- Calc --- */
        .calc-screen {
            background: var(--bg); border-radius: 20px; padding: 28px; text-align: right;
            margin-bottom: 20px; border: 1px solid var(--border);
        }
        .calc-label { font-size: 12px; font-weight: 700; color: var(--text-sub); display: block; margin-bottom: 8px; text-align: left;}
        .calc-input {
            width: 100%; border: none; background: transparent; text-align: right;
            font-size: 42px; font-weight: 300; color: var(--text-main); outline: none; font-family: monospace; margin: 0; padding: 0;
        }
        .calc-input::placeholder { color: #E5E0D8; }
        .calc-result-row {
            display: flex; justify-content: space-between; align-items: center;
            padding: 16px 0; border-top: 1px dashed rgba(0,0,0,0.05);
        }
        .result-val { font-size: 22px; font-weight: 700; color: var(--text-main); font-family: monospace; }
        .tax-val { font-size: 20px; font-weight: 700; color: var(--primary); font-family: monospace; }

        /* --- Korean Cards --- */
        .korean-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 16px; }
        .korean-card {
            background: var(--surface); border-radius: 20px; padding: 24px 16px; text-align: center; cursor: pointer;
            box-shadow: var(--shadow-card); transition: transform 0.1s; border: 1px solid transparent;
        }
        .korean-card:active { transform: scale(0.96); border-color: var(--primary); }
        .k-text { font-size: 16px; font-weight: 800; color: var(--text-main); margin-bottom: 6px; }
        .k-sub { font-size: 12px; color: var(--text-sub); }

        /* --- Nav --- */
        .nav-wrapper {
            position: fixed; bottom: 30px; left: 0; right: 0;
            display: flex; justify-content: center; pointer-events: none; z-index: 1000;
        }
        nav {
            pointer-events: auto;
            background: rgba(40, 35, 30, 0.9); backdrop-filter: blur(16px);
            padding: 12px 30px; border-radius: 99px; display: flex; gap: 36px; align-items: center;
            box-shadow: 0 12px 40px rgba(0,0,0,0.15);
        }
        .nav-btn {
            border: none; background: none; display: flex; flex-direction: column; align-items: center;
            gap: 4px; color: rgba(255,255,255,0.4); transition: all 0.2s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        .nav-btn.active { color: #FFFFFF; transform: scale(1.15); }
        .nav-btn i { font-size: 24px; }

        .hidden { display: none !important; }
        
        /* Modal & Toast */
        .modal-overlay {
            position: fixed; inset: 0; background: rgba(94, 80, 70, 0.6); backdrop-filter: blur(8px);
            z-index: 2000; display: none; align-items: center; justify-content: center;
            opacity: 0; transition: opacity 0.2s; pointer-events: none;
        }
        .modal-overlay.show { opacity: 1; pointer-events: auto; }
        .modal-content { 
            background: var(--surface); width: 85%; max-width: 320px; border-radius: 28px; padding: 40px 32px;
            text-align: center; box-shadow: 0 20px 60px rgba(0,0,0,0.2); transform: scale(0.9); transition: transform 0.2s;
        }
        .modal-overlay.show .modal-content { transform: scale(1); }
        .modal-big { font-size: 32px; font-weight: 800; margin-bottom: 12px; color: var(--text-main); }
        
        #toast {
            position: fixed; top: 90px; left: 50%; transform: translateX(-50%) translateY(-20px);
            background: var(--text-main); color: white; padding: 10px 20px; border-radius: 30px;
            font-size: 13px; font-weight: 700; opacity: 0; transition: all 0.3s; pointer-events: none; z-index: 3000;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        #toast.show { opacity: 1; transform: translateX(-50%) translateY(0); }

        /* Guide Titles */
        .guide-section-title {
            font-size: 12px; font-weight: 700; color: var(--primary); margin-bottom: 16px; 
            letter-spacing: 1px; text-align: center; text-transform: uppercase;
        }

    </style>
</head>
<body>

    <!-- Header -->
    <header>
        <h1>SEOUL</h1>
        <div class="weather-pill" id="weather-widget">
            <i class="fa-solid fa-spinner fa-spin"></i> ËºâÂÖ•‰∏≠
        </div>
    </header>
    <div id="toast">Â∑≤Ë§áË£ΩÂú∞ÂùÄ</div>

    <main>
        
        <!-- Ë°åÁ®ã -->
        <div id="view-plan">
            <div class="day-slider" id="day-slider"></div>
            <div id="day-content"></div>
        </div>

        <!-- Ë®àÁÆó -->
        <div id="view-calc" class="hidden">
            <div class="card">
                <div class="calc-screen">
                    <span class="calc-label">Ëº∏ÂÖ•ÈüìÂπ£ÈáëÈ°ç (KRW)</span>
                    <input type="tel" id="calc-input" class="calc-input" placeholder="0" oninput="calculateAll()">
                </div>
                <div style="padding: 0 12px;">
                    <div class="calc-result-row">
                        <span style="font-size:13px; color:var(--text-sub);">Á¥ÑÂêàÂè∞Âπ£</span>
                        <span class="result-val" id="res-twd">0</span>
                    </div>
                    <div class="calc-result-row" style="border-top:none; padding-top:0;">
                        <span style="font-size:13px; color:var(--text-sub);">È†êË®àÈÄÄÁ®Ö</span>
                        <span class="tax-val" id="res-tax">0</span>
                    </div>
                </div>
            </div>
            <div style="text-align:center; font-size:12px; color:var(--text-sub); margin-top:24px; opacity:0.6; font-weight: 500;">
                ÂåØÁéá 1 : <span id="rate-display">0.024</span> ‚Ä¢ Êªø 3Ëê¨ÈÄÄÁ®Ö
            </div>
        </div>

        <!-- ÊîªÁï• -->
        <div id="view-guide" class="hidden">
            <div style="margin-bottom: 24px;">
                <div class="guide-section-title">üó£Ô∏è ÁîüÂ≠òÈüìË™û</div>
                <div class="korean-grid">
                    <div class="korean-card" onclick="modal('ÏïàÎÖïÌïòÏÑ∏Ïöî','‰Ω†Â•Ω (ÂÆâÂ¶ûÂìà„Ñô„ÑüÂë¶)')"><div class="k-text">‰Ω†Â•Ω</div><div class="k-sub">ÊâìÊãõÂëº</div></div>
                    <div class="korean-card" onclick="modal('Í∞êÏÇ¨Ìï©ÎãàÎã§','Ë¨ùË¨ù (Â∫∑ÊííÂìàÂí™Êê≠)')"><div class="k-text">Ë¨ùË¨ù</div><div class="k-sub">Á¶ÆË≤åÂøÖÂÇô</div></div>
                    <div class="korean-card" onclick="modal('Ïù¥Í±∞ Ï£ºÏÑ∏Ïöî','ÊàëË¶ÅÈÄôÂÄã (‰ºäÂãæ Êú±„Ñô„ÑüÂë¶)')"><div class="k-text">ÊàëË¶ÅÈÄôÂÄã</div><div class="k-sub">ÈªûÈ§êË≥ºÁâ©</div></div>
                    <div class="korean-card" onclick="modal('ÌôîÏû•Ïã§','Ê¥óÊâãÈñìÂú®Âì™Ôºü')"><div class="k-text">Ê¥óÊâãÈñì</div><div class="k-sub">ÊÄ•Áî®</div></div>
                    <div class="korean-card" onclick="modal('ÍπéÏïÑÏ£ºÏÑ∏Ïöî','ÁÆó‰æøÂÆú‰∏ÄÈªû')"><div class="k-text">‰æøÂÆúÈªû</div><div class="k-sub">ÊÆ∫ÂÉπÁî®</div></div>
                    <div class="korean-card" onclick="modal('Î¨º Ï¢Ä Ï£ºÏÑ∏Ïöî','Ë´ãÁµ¶ÊàëÊ∞¥')"><div class="k-text">Áµ¶ÊàëÊ∞¥</div><div class="k-sub">È§êÂª≥Áî®</div></div>
                </div>
            </div>

            <div style="margin-top:40px;">
                <div class="guide-section-title">üîó ÂØ¶Áî®ÈÄ£Áµê</div>
                <div class="option-group" style="background:transparent; border:none; gap:12px;">
                    <a href="https://m.map.naver.com/" target="_blank" class="option-item" style="box-shadow:var(--shadow-card); border:1px solid var(--border);">
                        <span class="option-name" style="color:#03C75A;">Naver Map Âú∞Âúñ</span> <i class="fa-solid fa-chevron-right" style="font-size:10px; color:#ccc;"></i>
                    </a>
                    <a href="https://n.weather.naver.com/" target="_blank" class="option-item" style="box-shadow:var(--shadow-card); border:1px solid var(--border);">
                        <span class="option-name" style="color:#3b82f6;">Naver Weather Â§©Ê∞£</span> <i class="fa-solid fa-chevron-right" style="font-size:10px; color:#ccc;"></i>
                    </a>
                </div>
            </div>
        </div>

    </main>

    <!-- Â∫ïÈÉ®Â∞éËà™ -->
    <div class="nav-wrapper">
        <nav>
            <button class="nav-btn active" onclick="switchView('plan', this)">
                <i class="fa-regular fa-calendar-check"></i>
            </button>
            <button class="nav-btn" onclick="switchView('calc', this)">
                <i class="fa-solid fa-calculator"></i>
            </button>
            <button class="nav-btn" onclick="switchView('guide', this)">
                <i class="fa-regular fa-compass"></i>
            </button>
        </nav>
    </div>

    <!-- Modal -->
    <div id="modal" class="modal-overlay" onclick="closeModal()">
        <div class="modal-content" onclick="event.stopPropagation()">
            <div id="m-big" class="modal-big"></div>
            <div id="m-sub" style="font-size:15px; color:var(--text-sub); margin-bottom:32px; font-weight: 500;"></div>
            <div style="font-size:13px; color:var(--primary); font-weight:800; cursor:pointer;" onclick="closeModal()">CLOSE</div>
        </div>
    </div>

    <script>
        // --- DATA ---
        const itinerary = [
            { 
                d: 1, date: "1/25 (Êó•)", title: "ÊäµÈÅî & ÊòéÊ¥û",
                items: [
                    { time:"13:00", title:"L7 È£ØÂ∫ó", desc:"ÂØÑÊîæË°åÊùé / Â§ßÂª≥ÊèõÈå¢", map:"L7 Î™ÖÎèô" },
                    { 
                        time:"13:30", type:"meal", title:"ÂçàÈ§ê‰∏âÈÅ∏‰∏Ä", 
                        opts:[
                            {n:"ÊòéÊ¥ûÈ§ÉÂ≠ê", k:"Î™ÖÎèôÍµêÏûê", t:"walk", tip:"‰∫∫Â§ö"},
                            {n:"Á•û‰ªôÈõ™ÊøÉÊπØ", k:"Ïã†ÏÑ†ÏÑ§ÎÜçÌÉï", t:"walk", tip:"ÊéíÈöä"},
                            {n:"Ê≤≥Êù±È§®", k:"ÌïòÎèôÍ¥Ä", t:"walk", tip:"ËÄÅÂ∫ó"}
                        ]
                    },
                    { 
                        time:"14:30", title:"ÂÖçÁ®ÖÂ∫óË≥ºÁâ©", desc:"Êñ∞‰∏ñÁïå + Ê®ÇÂ§©Á∏ΩÂ∫ó (Ë®òÂæóÂ∏∂Ë≠∑ÁÖß)", map:"Ïã†ÏÑ∏Í≥ÑÎ©¥ÏÑ∏Ï†ê Î™ÖÎèôÏ†ê",
                        brands: ["Gentle Monster", "Tamburins", "ÂúãÈöõÁ≤æÂìÅ(Ê©üÂ†¥Êèê)"]
                    },
                    { 
                        time:"18:00", title:"ÊòéÊ¥ûÊéÉË≤®", desc:"È£ØÂ∫óÊ®ì‰∏ãÂ∞±ÊòØÊà∞ÂçÄ", map:"Î¨¥Ïã†ÏÇ¨ Ïä§ÌÉ†Îã§Îìú Î™ÖÎèô",
                        brands: ["emis", "The North Face", "Musinsa", "NB"]
                    },
                    { 
                        time:"19:00", type:"meal", title:"ÊôöÈ§êÔºöÈüìÂºèÁÉ§ËÇâ", 
                        opts:[
                            {n:"ÁéãÂ¶ÉÂÆ∂", k:"ÏôïÎπÑÏßë", t:"res"},
                            {n:"ÈªÉÈáëÁâßÂ†¥", k:"Ìô©Í∏àÎ™©Ïû•", t:"res"},
                            {n:"ËçíË¨¨ÁöÑÁîüËÇâ", k:"ÏóâÌÑ∞Î¶¨ÏÉùÍ≥†Í∏∞", t:"walk"}
                        ]
                    }
                ]
            },
            { 
                d: 2, date: "1/26 (‰∏Ä)", title: "Âè§ÂÆÆ & ÊâπÁôº",
                items: [
                    { time:"09:30", title:"ÊôØÁ¶èÂÆÆ", desc:"Á©øÈüìÊúçÈÄ≤Â†¥ÂÖçË≤ª (È†êÁ¥Ñ9:30)", map:"Í≤ΩÎ≥µÍ∂Å" },
                    { 
                        time:"12:00", type:"meal", title:"ÂçàÈ§êÔºöË•øÊùëÁæéÈ£ü", 
                        opts:[
                            {n:"Âúü‰øóÊùëËîòÈõûÊπØ", k:"ÌÜ†ÏÜçÏ¥å", t:"walk"},
                            {n:"ÁΩêÈ†≠È§ÉÂ≠ê", k:"Íπ°ÌÜµÎßåÎëê", t:"app"},
                            {n:"ÈÄö‰ªÅÂ∏ÇÂ†¥", k:"ÌÜµÏù∏ÏãúÏû•", t:"walk"}
                        ]
                    },
                    { time:"13:30", title:"Folnua", desc:"Âêà‰∫ïÁ´ô Showroom Ë≤∑ÂåÖÂåÖ", map:"Ìè¥Îâ¥ÏïÑ ÏáºÎ£∏", brands:["Folnua"] },
                    { 
                        time:"17:00", type:"meal", title:"ÊôöÈ§êÔºöÂêà‰∫ï/Êù±Â§ßÈñÄ", 
                        opts:[
                            {n:"Â±ãÂêåÈ£ü", k:"Ïò•ÎèôÏãù", t:"app"},
                            {n:"Áµ¶Ë±öÁöÑÁî∑‰∫∫", k:"ÎèàÏ£ºÎäîÎÇ®Ïûê", t:"walk"},
                            {n:"Ê©ãÊùëÁÇ∏Èõû", k:"ÍµêÏ¥åÏπòÌÇ®", t:"walk"}
                        ]
                    },
                    { 
                        time:"19:00", title:"Êù±Â§ßÈñÄÊâπÁôº", desc:"Êôö‰∏ä8ÈªûÂæåÈñãÂßãÁÜ±È¨ß", map:"apM PLACE",
                        brands: ["apM PLACE", "nuZZon", "nyu.nyu"]
                    }
                ]
            },
            { 
                d: 3, date: "1/27 (‰∫å)", title: "ËøëÈÉäÈÅä",
                items: [
                    { time:"08:00", title:"ÈõÜÂêàÂá∫Áôº", desc:"ÂçóÊÄ°Â≥∂ / ÊªëÈõ™Ë°åÁ®ã" },
                    { time:"12:00", type:"meal", title:"ÂçàÈ§ê", opts:[{n:"Êò•Â∑ùËæ£ÁÇíÈõûÊéí", k:"", t:"walk"}] },
                    { 
                        time:"20:00", type:"choice", title:"Â§úÊôö‰∫åÈÅ∏‰∏Ä", desc:"ÁúãÈ´îÂäõÊ±∫ÂÆö",
                        choices: [
                            {n:"A ÊñπÊ°à", desc:"ÂõûÊòéÊ¥ûÂêÉÁÇ∏Èõû", target:"BHCÏπòÌÇ® Î™ÖÎèôÎ≥∏Ï†ê"},
                            {n:"B ÊñπÊ°à", desc:"‰∏äÂçóÂ±±Â°îÁúãÂ§úÊôØ", target:"ÎÇ®ÏÇ∞ÏÑúÏö∏ÌÉÄÏõå"}
                        ]
                    }
                ]
            },
            { 
                d: 4, date: "1/28 (‰∏â)", title: "Ê±üÂçóÊΩÆÊµÅ",
                items: [
                    { 
                        time:"11:00", title:"ÁãéÈ∑ó‰∫≠ÊΩÆÁâå", desc:"Â≥∂Â±±ÂÖ¨ÂúíÂøÖÈÄõ", map:"ÏäàÌîÑÎ¶º ÎèÑÏÇ∞",
                        brands: ["Supreme", "St√ºssy", "Human Made", "Haus Dosan"]
                    },
                    { 
                        time:"13:00", type:"meal", title:"ÂçàÈ§êÔºöÂ≥∂Â±±ÂÖ¨Âúí", 
                        opts:[
                            {n:"London Bagel", k:"Îü∞ÎçòÎ≤†Ïù¥Í∏ÄÎÆ§ÏßÄÏóÑ", t:"app"},
                            {n:"Gino's Pizza", k:"ÏßÄÎÖ∏Ïä§ÌîºÏûê", t:"res"},
                            {n:"Dosan Bunsik", k:"ÎèÑÏÇ∞Î∂ÑÏãù", t:"walk"}
                        ]
                    },
                    { 
                        time:"14:30", type:"choice", title:"‰∏ãÂçà‰∫åÈÅ∏‰∏Ä", desc:"ÊÉ≥ÊÇ†ÈñíÈÇÑÊòØÊÉ≥ÈÄõË°ó?",
                        choices: [
                            {n:"A ÊñπÊ°à", desc:"ÁïôÂú®Â≥∂Â±±ÂêÉ Nudake", target:"ÎàÑÎç∞Ïù¥ÌÅ¨"},
                            {n:"B ÊñπÊ°à", desc:"ÂéªËÅñÊ∞¥Ê¥ûÈÄõ Dior/ADER", target:"ÏÑ±ÏàòÎèô"}
                        ]
                    },
                    { time:"18:00", type:"meal", title:"ÊôöÈ§êÂõûÊòéÊ¥û", opts:[{n:"ÂÖÉÂ†ÇÈ¶¨Èà¥ËñØÊπØ", k:"ÏõêÎãπÍ∞êÏûêÌÉï", t:"walk"}]}
                ]
            },
            { 
                d: 5, date: "1/29 (Âõõ)", title: "ÂãïÁâ©Âúí & Áèæ‰ª£",
                items: [
                    { time:"10:30", title:"Zoolung Zoolung", desc:"Ê∞∏ÁôªÊµ¶ÂÆ§ÂÖßÂãïÁâ©Âúí", map:"Ï£ºÎ†ÅÏ£ºÎ†Å ÏòÅÎì±Ìè¨" },
                    { 
                        time:"12:30", type:"meal", title:"ÂçàÈ§êÔºöÂïÜÂ†¥ÂÖß", 
                        opts:[{n:"ÈºéÊ≥∞Ë±ê", k:"ÎîòÌÉÄÏù¥Ìéë", t:"res"}, {n:"Shake Shack", k:"ÏâêÏù¥ÌÅ¨Ïâë", t:"walk"}]
                    },
                    { 
                        time:"15:00", title:"Áèæ‰ª£ÁôæË≤®", desc:"Ê±ùÁü£Â≥∂ B2", map:"ÎçîÌòÑÎåÄ ÏÑúÏö∏",
                        brands: ["Matin Kim", "Marithe", "Covernat", "Arket"]
                    },
                    { time:"19:00", type:"meal", title:"ÊôöÈ§êÔºöÁôæË≤®ÂÖß", opts:[{n:"Eataly", k:"Ïù¥ÌÉàÎ¶¨", t:"res"}, {n:"SMT Lounge", k:"SMTÎùºÏö¥ÏßÄ", t:"res"}] }
                ]
            },
            { 
                d: 6, date: "1/30 (‰∫î)", title: "ÁµÇÊ•µÊé°Ë≥º",
                items: [
                    { 
                        time:"09:30", title:"ÂçóÂ§ßÈñÄÁ´•Ë£ù", desc:"Âè™Êî∂ÁèæÈáëÔºÅ", map:"ÎÇ®ÎåÄÎ¨∏ÏãúÏû• ÏïÑÎèôÎ≥µÍ±∞Î¶¨",
                        brands: ["Burdeng", "Mama", "Porky"]
                    },
                    { 
                        time:"12:00", type:"meal", title:"ÂçàÈ§êÂøÖÂêÉ", 
                        opts:[
                            {n:"JoJo Ëõ§ËúäÂàÄÂâäÈ∫µ", k:"Ï°∞Ï°∞ÏπºÍµ≠Ïàò ÏãúÏ≤≠Ï†ê", t:"walk", tip:"üî•ÂøÖÂêÉ"},
                            {n:"ÈüìÈ†ÜÂ≠êÂ•∂Â•∂", k:"ÌïúÏàúÏûêÌï†Î®∏ÎãàÏÜêÏπºÍµ≠Ïàò", t:"walk"},
                            {n:"ÂØåÊùëÁîüÊãåÁâõËÇâ", k:"Î∂ÄÏ¥åÏú°Ìöå", t:"walk"}
                        ]
                    },
                    { time:"13:30", title:"Âª£ËóèÂ∏ÇÂ†¥", desc:"Ê£âË¢´ (Ë´ãËÄÅÈóÜÁúüÁ©∫Â£ìÁ∏Æ)", map:"Í¥ëÏû•ÏãúÏû•" },
                    { time:"14:30", title:"Ê®ÇÂ§©Ë∂ÖÂ∏Ç", desc:"È¶ñÁàæÁ´ôÊé°Ë≥º", map:"Î°ØÎç∞ÎßàÌä∏ ÏÑúÏö∏Ïó≠Ï†ê" },
                    { time:"19:00", type:"meal", title:"ÊôöÈ§êÔºö‰∏ÄÈöªÈõû", opts:[{n:"Èô≥ÁéâËèØÂ•∂Â•∂", k:"ÏßÑÏò•ÌôîÌï†Îß§ÏõêÏ°∞Îã≠ÌïúÎßàÎ¶¨", t:"walk"}] }
                ]
            },
            { 
                d: 7, date: "1/31 (ÂÖ≠)", title: "ÂõûÂÆ∂",
                items: [
                    { time:"08:30", title:"Check-out", desc:"Êê≠Ê©üÂ†¥Â∑¥Â£´ÂâçÂæÄ‰ªÅÂ∑ù" },
                    { time:"11:00", title:"È†òÂèñÂÖçÁ®ÖÂìÅ", desc:"ÂÖ•ÈóúÂæåÈ†òÂèñ" },
                    { time:"12:00", title:"Ëµ∑È£õ CI0165", desc:"Âπ≥ÂÆâÂõûÂÆ∂" }
                ]
            }
        ];

        // --- Logic ---
        
        let currentDayIdx = 0; 
        let rate = 0.024; 

        function init() {
            renderDaySlider();
            renderDayContent(0);
            updateWeather();
            updateRate();
        }

        function renderDaySlider() {
            const slider = document.getElementById('day-slider');
            slider.innerHTML = itinerary.map((d, i) => `
                <div class="day-chip ${i === 0 ? 'active' : ''}" onclick="selectDay(${i}, this)">
                    <span class="day-chip-num">Day ${d.d}</span>
                    <span class="day-chip-date">${d.date.split(' ')[0]}</span>
                </div>
            `).join('');
        }

        function selectDay(index, el) {
            currentDayIdx = index;
            document.querySelectorAll('.day-chip').forEach(c => c.classList.remove('active'));
            el.classList.add('active');
            el.scrollIntoView({behavior: 'smooth', block: 'nearest', inline: 'center'});
            
            const content = document.getElementById('day-content');
            content.style.opacity = '0';
            content.style.transform = 'translateY(5px)';
            setTimeout(() => {
                renderDayContent(index);
                content.style.opacity = '1';
                content.style.transform = 'translateY(0)';
            }, 200);
        }

        function renderDayContent(index) {
            const data = itinerary[index];
            const container = document.getElementById('day-content');
            
            let html = `
                <div style="margin-bottom:24px; padding:0 4px;">
                    <div style="font-size:22px; font-weight:700; color:var(--text-main); margin-bottom:4px; letter-spacing:0.5px;">${data.title}</div>
                    <div style="font-size:13px; color:var(--text-sub);">${data.date}</div>
                </div>
            `;

            data.items.forEach(ev => {
                if (ev.type === 'meal') {
                    // È§êÂª≥Âç°Áâá
                    html += `
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title"><i class="fa-solid fa-utensils" style="font-size:14px; color:#ddd; margin-right:8px;"></i>${ev.title}</div>
                            <div class="card-header-right">
                                <span class="card-time">${ev.time}</span>
                            </div>
                        </div>
                        <div class="option-group">
                            ${ev.opts.map(opt => {
                                let bClass = opt.t === 'app' ? 'app' : (opt.t === 'res' ? 'res' : 'walk');
                                let bText = opt.t === 'app' ? 'App' : (opt.t === 'res' ? 'È†êÁ¥Ñ' : 'ÊéíÈöä');
                                let link = opt.k ? `https://m.map.naver.com/search2/search.naver?query=${encodeURIComponent(opt.k)}` : '#';
                                return `
                                <a href="${link}" target="_blank" class="option-item">
                                    <div style="display:flex; flex-direction:column; gap:2px;">
                                        <span class="option-name">${opt.n}</span>
                                        <span style="font-size:11px; color:#ccc;">${opt.tip || ''}</span>
                                    </div>
                                    <div class="option-meta">
                                        <span class="badge ${bClass}">${bText}</span>
                                        <div class="btn-naver"><i class="fa-solid fa-location-arrow"></i></div>
                                    </div>
                                </a>`;
                            }).join('')}
                        </div>
                    </div>`;
                } else if (ev.type === 'choice') {
                    // ÊäâÊìáÂç°Áâá
                    html += `
                    <div class="card" style="border: 2px dashed var(--border); background:#FAFAFA;">
                        <div style="text-align:center; font-weight:700; color:var(--primary); margin-bottom:12px;">${ev.title}</div>
                        <div class="choice-group">
                            ${ev.choices.map((c, idx) => `
                            <a href="https://m.map.naver.com/search2/search.naver?query=${encodeURIComponent(c.target)}" target="_blank" class="choice-item">
                                <div>
                                    <span class="choice-tag" style="background:${idx===0?'var(--text-main)':'var(--primary)'}">${c.n}</span>
                                    <span class="choice-name">${c.desc}</span>
                                </div>
                                <i class="fa-solid fa-chevron-right" style="font-size:10px; color:#ccc;"></i>
                            </a>`).join('')}
                        </div>
                    </div>`;
                } else {
                    // ‰∏ÄËà¨Âç°Áâá
                    let link = ev.map ? `https://m.map.naver.com/search2/search.naver?query=${encodeURIComponent(ev.map)}` : null;
                    html += `
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">${ev.title}</div>
                            <div class="card-header-right">
                                ${ev.map ? `<button class="btn-copy" onclick="copy('${ev.map}')"><i class="fa-regular fa-copy"></i></button>` : ''}
                                <span class="card-time">${ev.time}</span>
                                ${link ? `<a href="${link}" target="_blank" class="btn-naver"><i class="fa-solid fa-location-arrow"></i></a>` : ''}
                            </div>
                        </div>
                        <div class="card-desc">${ev.desc}</div>
                        
                        ${ev.brands ? `
                        <div class="brand-box">
                            <span class="brand-label">SHOPPING LIST</span>
                            <div class="brand-list">
                                ${ev.brands.map(b => `<span class="brand-tag">${b}</span>`).join('')}
                            </div>
                        </div>` : ''}
                    </div>`;
                }
            });

            container.innerHTML = html;
        }

        // --- Utils ---
        function switchView(viewId, btn) {
            ['plan', 'calc', 'guide'].forEach(id => document.getElementById('view-'+id).classList.add('hidden'));
            document.getElementById('view-'+viewId).classList.remove('hidden');
            document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
            window.scrollTo(0,0);
        }

        function calculateAll() {
            const inputVal = document.getElementById('calc-input').value;
            // Âö¥Ê†ºÊ∑®ÂåñËº∏ÂÖ•ÔºåÈò≤Ê≠¢Ê≥®ÂÖ•ÊàñÈåØË™§Â≠óÁ¨¶
            const val = parseFloat(inputVal.replace(/[^0-9.]/g, ''));
            
            if (isNaN(val) || inputVal === '') {
                document.getElementById('res-twd').innerText = '0';
                document.getElementById('res-tax').innerText = '0';
                return;
            }
            
            document.getElementById('res-twd').innerText = Math.round(val * rate).toLocaleString();
            let r = 0;
            if (val >= 30000 && val < 50000) r = 1500;
            else if (val >= 50000 && val < 75000) r = 3500;
            else if (val >= 75000 && val < 100000) r = 5000;
            else if (val >= 100000) r = Math.floor(val * 0.06);
            document.getElementById('res-tax').innerText = '‚Ç© ' + r.toLocaleString();
        }

        async function updateWeather() {
            try {
                // Ë®≠ÂÆö 5 Áßí TimeoutÔºåÈò≤Ê≠¢Á∂≤Ë∑ØÊÖ¢ÊôÇÂç°‰Ωè
                const timeoutPromise = new Promise((_, reject) => setTimeout(() => reject(new Error('Timeout')), 5000));
                const fetchPromise = fetch('https://api.open-meteo.com/v1/forecast?latitude=37.5665&longitude=126.9780&current=temperature_2m,weather_code&timezone=Asia%2FSeoul');
                const res = await Promise.race([fetchPromise, timeoutPromise]);
                
                if (!res.ok) throw new Error('API Error'); // Ê™¢Êü•ÁãÄÊÖãÁ¢º

                const d = await res.json();
                const temp = Math.round(d.current.temperature_2m);
                document.getElementById('weather-widget').innerHTML = `<i class="fa-solid fa-cloud" style="color:#8FB8CA;"></i> <span>È¶ñÁàæ ${temp}¬∞C</span>`;
            } catch(e) {
                // Â§±ÊïóÊôÇÂõûÈÄÄÈ°ØÁ§∫
                document.getElementById('weather-widget').innerHTML = `<span>È¶ñÁàæ‰πãÊóÖ</span>`;
            }
        }

        function updateRate() {
            fetch('https://api.exchangerate-api.com/v4/latest/KRW')
                .then(r => {
                    if (!r.ok) throw new Error('Network response was not ok');
                    return r.json();
                })
                .then(d => { 
                    if(d.rates && d.rates.TWD) {
                        rate = d.rates.TWD;
                        document.getElementById('rate-display').innerText = rate.toFixed(4);
                    }
                })
                .catch(e => {
                    console.log('Rate fetch failed, using default');
                    // ‰øùÊåÅÈ†êË®≠ÂÄºÔºå‰∏çÈúÄÈ°çÂ§ñÂãï‰Ωú
                });
        }

        function copy(text) {
            // ÈõôÈáç‰øùÈö™Ë§áË£ΩÊ©üÂà∂
            if (navigator.clipboard && navigator.clipboard.writeText) {
                navigator.clipboard.writeText(text).then(showToast).catch(fallbackCopy);
            } else {
                fallbackCopy(text);
            }
        }

        function fallbackCopy(text) {
            try {
                const textArea = document.createElement("textarea");
                textArea.value = text;
                textArea.style.position = "fixed"; // ÈÅøÂÖçÊªæÂãï
                document.body.appendChild(textArea);
                textArea.focus();
                textArea.select();
                document.execCommand('copy');
                document.body.removeChild(textArea);
                showToast();
            } catch (err) {
                alert('Ë´ãÊâãÂãïË§áË£Ω: ' + text);
            }
        }

        function showToast() {
            const t = document.getElementById('toast');
            t.classList.add('show');
            setTimeout(() => t.classList.remove('show'), 2000);
        }

        function modal(big, sub) {
            document.getElementById('m-big').innerText = big;
            document.getElementById('m-sub').innerText = sub;
            const modalEl = document.getElementById('modal');
            modalEl.style.display = 'flex';
            setTimeout(() => modalEl.classList.add('show'), 10);
        }
        
        function closeModal() {
            const modalEl = document.getElementById('modal');
            modalEl.classList.remove('show');
            setTimeout(() => modalEl.style.display = 'none', 200);
        }

        window.onload = init;
    </script>
</body>
</html>


