<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="theme-color" content="#F2F1F6">
    <meta name="format-detection" content="telephone=no">
    <title>é¦–çˆ¾ 2026 è¦ªå­æš–å†¬è¡Œ</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=M+PLUS+Rounded+1c:wght@400;500;700;800&display=swap" rel="stylesheet">
    
    <style>
        /* --- 1. æ ¸å¿ƒè®Šæ•¸ --- */
        :root {
            --bg: #F2F1F6;
            --surface: #FFFFFF;
            --primary: #C8A47E; /* å¥¶èŒ¶è‰² */
            --primary-dark: #A68665;
            --text-main: #1C1C1E;
            --text-sub: #8E8E93;
            --border: #E5E5EA;
            
            --accent-green: #34C759; 
            --accent-red: #FF3B30;
            --accent-blue: #007AFF;
            
            --radius: 18px;
            --shadow: 0 2px 8px rgba(0,0,0,0.04);
            
            --safe-top: env(safe-area-inset-top, 20px);
            --safe-bottom: env(safe-area-inset-bottom, 20px);
        }

        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        
        body {
            margin: 0; padding: 0;
            background-color: #E0E0E0;
            color: var(--text-main);
            font-family: -apple-system, BlinkMacSystemFont, "M PLUS Rounded 1c", "Segoe UI", Roboto, sans-serif;
            font-size: 15px;
            line-height: 1.5;
            overscroll-behavior-y: none;
            user-select: none;
            -webkit-user-select: none;
        }

        /* --- 2. æ‰‹æ©Ÿæ¨¡æ“¬å®¹å™¨ --- */
        .app-container {
            max-width: 480px;
            margin: 0 auto;
            background-color: var(--bg);
            min-height: 100vh;
            position: relative;
            box-shadow: 0 0 40px rgba(0,0,0,0.1);
            padding-bottom: calc(70px + var(--safe-bottom));
        }

        /* --- 3. Header --- */
        header {
            position: sticky; top: 0; z-index: 1000;
            background: rgba(242, 241, 246, 0.9);
            backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px);
            padding: calc(12px + var(--safe-top)) 20px 12px 20px;
            display: flex; justify-content: space-between; align-items: center;
            border-bottom: 0.5px solid rgba(0,0,0,0.1);
        }
        h1 { margin: 0; font-size: 22px; font-weight: 800; letter-spacing: 0.5px; }

        /* --- 4. Main Content Area --- */
        main { padding: 10px 16px; }

        /* --- 5. å…ƒä»¶æ¨£å¼ --- */
        .ios-card {
            background: var(--surface);
            border-radius: var(--radius);
            overflow: hidden;
            margin-bottom: 16px;
            box-shadow: var(--shadow);
            border: 1px solid rgba(0,0,0,0.02);
        }
        
        /* åˆ—è¡¨é …ç›® */
        .ios-list-item {
            padding: 16px;
            display: flex; 
            align-items: flex-start;
            justify-content: space-between;
            background: var(--surface);
            border-bottom: 0.5px solid rgba(0,0,0,0.08);
            text-decoration: none; color: inherit;
            cursor: pointer;
            transition: background 0.2s;
            position: relative;
        }
        .ios-list-item:last-child { border-bottom: none; }
        .ios-list-item:active { background: #F2F2F7; }

        .item-left { flex: 1; min-width: 0; margin-right: 12px; }
        
        /* å³å´å®¹å™¨èª¿æ•´ï¼Œé©æ‡‰æŒ‰éˆ• */
        .item-right { 
            flex-shrink: 0; text-align: right; 
            display: flex; flex-direction: column; align-items: flex-end; gap: 6px; 
        }

        .item-title { font-weight: 700; font-size: 16px; margin-bottom: 4px; line-height: 1.3; }
        .item-desc { font-size: 13px; color: var(--text-sub); line-height: 1.4; display: block; }
        
        .time-badge { 
            font-size: 12px; font-weight: 700; color: var(--text-sub); 
            background: #F2F2F7; padding: 4px 8px; border-radius: 6px; 
            display: inline-block; white-space: nowrap;
        }

        /* è¤‡è£½åœ°å€æŒ‰éˆ• */
        .addr-btn {
            font-size: 11px; color: var(--text-sub); background: #F2F2F7;
            padding: 4px 8px; border-radius: 6px; border: 1px solid rgba(0,0,0,0.05);
            display: flex; align-items: center; gap: 4px; cursor: pointer;
            transition: all 0.2s; z-index: 10;
        }
        .addr-btn:active { background: #E5E5EA; transform: scale(0.95); color: var(--text-main); }
        .addr-btn i { font-size: 10px; }

        /* å“ç‰Œæ¨™ç±¤ */
        .brand-list { display: flex; flex-wrap: wrap; gap: 6px; margin-top: 8px; }
        .brand-tag { 
            font-size: 11px; background: #F9F9F9; border: 1px solid #E5E5EA;
            padding: 3px 8px; border-radius: 6px; color: var(--text-main); font-weight: 600; 
        }
        .tag-must { border-color: var(--primary); color: var(--primary-dark); background: #FFF9F2; }

        /* Tags */
        .tag { font-size: 11px; padding: 4px 8px; border-radius: 6px; font-weight: 700; white-space: nowrap; }
        .tag-res { background: #E4F9E9; color: #34C759; }
        .tag-wait { background: #FFEBEA; color: #FF3B30; }
        .tag-app { background: #E7F3FF; color: #007AFF; }
        .tag-baby { background: #FFF0F5; color: #FF69B4; border: 1px solid #FFB6C1; }

        /* --- 6. å¤©æ°£å¡ç‰‡ --- */
        .weather-card {
            background: linear-gradient(135deg, #6DD5FA 0%, #2980B9 100%);
            color: white; padding: 20px; border-radius: 20px;
            display: flex; justify-content: space-between; align-items: center;
            margin-bottom: 20px; margin-top: 10px;
            box-shadow: 0 8px 20px rgba(41, 128, 185, 0.3);
        }
        .wc-info { display: flex; flex-direction: column; }
        .wc-temp { font-size: 32px; font-weight: 800; line-height: 1; margin-bottom: 4px; }
        .wc-desc { font-size: 14px; opacity: 0.9; font-weight: 500; }
        .wc-icon { font-size: 40px; opacity: 0.9; }

        /* --- 7. æ—¥æœŸæ»‘å¡Š --- */
        .day-slider-container {
            position: sticky; top: calc(60px + var(--safe-top));
            z-index: 900; background: var(--bg);
            margin: 0 -16px 10px -16px; padding: 10px 16px;
            mask-image: linear-gradient(to right, black 90%, transparent 100%);
            -webkit-mask-image: linear-gradient(to right, black 90%, transparent 100%);
        }
        .day-slider { display: flex; overflow-x: auto; gap: 8px; scrollbar-width: none; }
        .day-slider::-webkit-scrollbar { display: none; }
        
        .day-chip {
            flex: 0 0 auto; min-width: 64px;
            background: var(--surface); border-radius: 14px; padding: 10px;
            text-align: center; cursor: pointer; transition: all 0.2s;
            border: 1px solid transparent; color: var(--text-sub);
            box-shadow: 0 2px 6px rgba(0,0,0,0.03);
        }
        .day-chip.active {
            background: var(--text-main); color: white;
            transform: scale(1.05); box-shadow: 0 4px 12px rgba(0,0,0,0.2);
        }
        .day-chip-num { font-size: 11px; margin-bottom: 2px; opacity: 0.8; font-weight: 700; }
        .day-chip-date { font-size: 16px; font-weight: 800; }

        /* --- 8. Bottom Nav --- */
        nav {
            position: fixed; bottom: 0; left: 0; right: 0; z-index: 1000;
            max-width: 480px; margin: 0 auto;
            background: rgba(255,255,255,0.9); backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border-top: 0.5px solid rgba(0,0,0,0.15);
            padding-bottom: var(--safe-bottom);
            height: calc(60px + var(--safe-bottom));
            display: flex; justify-content: space-around; align-items: center;
        }
        .nav-btn {
            border: none; background: none; flex: 1; height: 100%;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            gap: 4px; color: #999; cursor: pointer;
        }
        .nav-btn.active { color: var(--primary-dark); }
        .nav-btn i { font-size: 20px; transition: transform 0.2s; }
        .nav-btn.active i { transform: translateY(-2px); }
        .nav-btn span { font-size: 10px; font-weight: 600; }

        /* --- 9. Calc View --- */
        .calc-display {
            background: var(--surface); border-radius: 20px; padding: 24px;
            text-align: right; margin-bottom: 16px; box-shadow: var(--shadow);
        }
        .calc-input {
            width: 100%; border: none; background: transparent; text-align: right;
            font-size: 48px; font-weight: 300; color: var(--text-main); outline: none;
            font-family: -apple-system, monospace; margin: 8px 0;
        }
        .result-row {
            display: flex; justify-content: space-between; align-items: center;
            padding: 12px 0; border-top: 0.5px solid rgba(0,0,0,0.08);
        }
        .result-val { font-size: 20px; font-weight: 700; font-family: monospace; }

        /* --- 10. Utils --- */
        .hidden { display: none !important; }
        .section-header { font-size: 20px; font-weight: 800; margin: 24px 0 12px 4px; color: var(--text-main); }
        .grid-2 { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; }
        .grid-card {
            background: var(--surface); border-radius: var(--radius); padding: 20px;
            text-align: center; box-shadow: var(--shadow); cursor: pointer;
        }
        .grid-card:active { transform: scale(0.96); background: #FAFAFA; }

        /* Modal & Toast */
        .modal-overlay {
            position: absolute; inset: 0; background: rgba(0,0,0,0.4); backdrop-filter: blur(4px);
            z-index: 2000; display: none; align-items: flex-end; justify-content: center;
            padding-bottom: var(--safe-bottom);
        }
        .modal-overlay.show { opacity: 1; }
        .modal-content {
            background: var(--surface); width: 95%; border-radius: 24px; padding: 30px 20px;
            text-align: center; margin-bottom: 20px; box-shadow: 0 10px 40px rgba(0,0,0,0.2);
            animation: slideUp 0.3s cubic-bezier(0.16, 1, 0.3, 1);
        }
        @keyframes slideUp { from {transform: translateY(100%);} to {transform: translateY(0);} }
        .modal-btn {
            background: var(--text-main); color: white; border: none; padding: 14px;
            width: 100%; border-radius: 14px; font-size: 16px; font-weight: 700; margin-top: 24px;
        }
        #toast {
            position: fixed; top: 90px; left: 50%; transform: translateX(-50%) translateY(-20px);
            background: rgba(0,0,0,0.85); color: white; padding: 10px 20px; border-radius: 30px;
            font-size: 13px; font-weight: 600; opacity: 0; transition: all 0.3s; 
            pointer-events: none; z-index: 3000; display: flex; align-items: center; gap: 8px;
        }
        #toast.show { opacity: 1; transform: translateX(-50%) translateY(0); }

    </style>
</head>
<body>

<div class="app-container">
    <header>
        <h1>SEOUL 2026</h1>
        <div style="font-size:12px; font-weight:600; color:var(--text-sub);">
            1/25 - 1/31 (çµ‚æ¥µç¾é£Ÿç‰ˆ)
        </div>
    </header>

    <div id="toast"><i class="fa-solid fa-check-circle"></i> <span>å·²è¤‡è£½åœ°å€</span></div>

    <main>
        <div id="view-plan">
            
            <div class="weather-card" id="weather-card" onclick="updateWeather()">
                <div class="wc-info">
                    <span class="wc-temp" id="wc-temp">--Â°</span>
                    <span class="wc-desc" id="wc-desc">è¼‰å…¥å¤©æ°£ä¸­...</span>
                    <span style="font-size:11px; opacity:0.7; margin-top:4px;">é»æ“Šé‡æ–°æ•´ç†</span>
                </div>
                <div class="wc-icon">
                    <i class="fa-solid fa-cloud" id="wc-icon"></i>
                </div>
            </div>

            <div class="day-slider-container">
                <div class="day-slider" id="day-slider"></div>
            </div>
            <div id="day-content" style="padding-bottom: 20px;"></div>
        </div>

        <div id="view-calc" class="hidden">
            <div class="section-header">åŒ¯ç‡è¨ˆç®—</div>
            <div class="ios-card" style="padding:16px; background:#FAFAFA; border:none;">
                <div style="font-size:13px; font-weight:600; color:var(--text-sub);">ç•¶å‰åŒ¯ç‡ (TWD)</div>
                <div style="font-size:14px; margin-top:4px;">1 KRW â‰ˆ <span id="rate-display" style="font-weight:700;">0.0235</span></div>
            </div>

            <div class="calc-display">
                <div style="font-size:13px; color:var(--text-sub); font-weight:600; display:flex; justify-content:space-between;">
                    <span>è¼¸å…¥éŸ“å¹£ (KRW)</span>
                    <span onclick="resetCalc()" style="color:var(--primary); cursor:pointer;">æ¸…é™¤</span>
                </div>
                <input type="text" inputmode="decimal" id="calc-input" class="calc-input" placeholder="0" oninput="calculateAll()">
                
                <div class="result-row">
                    <span style="color:var(--text-sub);">ç´„åˆå°å¹£</span>
                    <span class="result-val" id="res-twd">0</span>
                </div>
                <div class="result-row" style="border-top:none; padding-top:0;">
                    <span style="color:var(--text-sub);">é è¨ˆé€€ç¨…</span>
                    <span class="result-val" style="color:var(--accent-green);" id="res-tax">0</span>
                </div>
            </div>
            <div style="text-align:center; font-size:12px; color:var(--text-sub); line-height:1.6;">
                <i class="fa-solid fa-circle-info"></i> å–®ç­†æ»¿ 30,000 éŸ“å…ƒå³å¯é€€ç¨…
            </div>
        </div>

        <div id="view-guide" class="hidden">
            <div class="section-header">ç”Ÿå­˜æºé€šå¡ (è¦ªå­)</div>
            <div class="grid-2">
                <div class="grid-card" onclick="openModal('ì•„ê¸° ì˜ì ìˆì–´ìš”?','æœ‰å…’ç«¥æ¤…å—ï¼Ÿ')"><span class="grid-icon">ğŸª‘</span><div class="grid-title">å…’ç«¥æ¤…</div></div>
                <div class="grid-card" onclick="openModal('ì•ˆ ë§µê²Œ í•´ì£¼ì„¸ìš”','è«‹åšä¸è¾£çš„')"><span class="grid-icon">ğŸŒ¶ï¸ğŸš«</span><div class="grid-title">ä¸è¦è¾£</div></div>
                <div class="grid-card" onclick="openModal('ìœ ëª¨ì°¨','å“ªè£¡æœ‰é›»æ¢¯/æ¨è»Šï¼Ÿ')"><span class="grid-icon">ğŸ›’</span><div class="grid-title">æ¨è»Š/é›»æ¢¯</div></div>
                <div class="grid-card" onclick="openModal('í™”ì¥ì‹¤','æ´—æ‰‹é–“åœ¨å“ªï¼Ÿ')"><span class="grid-icon">ğŸš»</span><div class="grid-title">æ´—æ‰‹é–“</div></div>
                <div class="grid-card" onclick="openModal('ê°ì‚¬í•©ë‹ˆë‹¤','è¬è¬ (åº·æ’’å“ˆå’ªæ­)')"><span class="grid-icon">ğŸ™</span><div class="grid-title">è¬è¬</div></div>
                <div class="grid-card" onclick="openModal('ì´ê±° ì£¼ì„¸ìš”','æˆ‘è¦é€™å€‹')"><span class="grid-icon">ğŸ‘‰</span><div class="grid-title">æˆ‘è¦é€™å€‹</div></div>
            </div>

            <div class="section-header">å¸¸ç”¨åœ°åœ–</div>
            <div class="ios-card">
                <a href="https://m.map.naver.com/" target="_blank" class="ios-list-item">
                    <div class="item-left">
                        <div class="item-title"><i class="fa-solid fa-map" style="color:#03C75A;"></i> Naver Map</div>
                        <div class="item-desc">åœ¨éŸ“åœ‹è«‹ç”¨é€™å€‹å°èˆª</div>
                    </div>
                    <div class="item-right">
                        <i class="fa-solid fa-chevron-right" style="color:#ccc; font-size:14px;"></i>
                    </div>
                </a>
                <a href="kakaot://" class="ios-list-item">
                    <div class="item-left">
                        <div class="item-title"><i class="fa-solid fa-taxi" style="color:#FEE500;"></i> Kakao T</div>
                        <div class="item-desc">å¸¶å°å­©å»ºè­°å¤šæ­è¨ˆç¨‹è»Š</div>
                    </div>
                    <div class="item-right">
                        <i class="fa-solid fa-chevron-right" style="color:#ccc; font-size:14px;"></i>
                    </div>
                </a>
            </div>
        </div>

    </main>

    <nav>
        <button class="nav-btn active" onclick="switchView('plan', this)">
            <i class="fa-solid fa-calendar-days"></i>
            <span>è¡Œç¨‹</span>
        </button>
        <button class="nav-btn" onclick="switchView('calc', this)">
            <i class="fa-solid fa-calculator"></i>
            <span>è¨ˆç®—</span>
        </button>
        <button class="nav-btn" onclick="switchView('guide', this)">
            <i class="fa-solid fa-book-open"></i>
            <span>æ”»ç•¥</span>
        </button>
    </nav>

    <div id="modal" class="modal-overlay" onclick="closeModal()">
        <div class="modal-content" onclick="event.stopPropagation()">
            <div id="m-big" style="font-size:36px; font-weight:800; margin-bottom:12px; color:var(--text-main); line-height:1.2;"></div>
            <div id="m-sub" style="font-size:16px; color:var(--text-sub); font-weight:500;"></div>
            <button class="modal-btn" onclick="closeModal()">é—œé–‰</button>
        </div>
    </div>
</div>

<script>
    // ================= DATA (2026 çµ‚æ¥µç¾é£Ÿå®Œå…¨ç‰ˆ) =================
    const APP_DATA = {
        rate: 0.0235,
        itinerary: [
            { 
                d: 1, date: "1/25 (æ—¥)", title: "æŠµé” & æ˜æ´ç¾é£Ÿå·¡ç¦®",
                items: [
                    { time:"07:05", title:"CI 0164 èµ·é£›", desc:"é«˜é›„ KHH å‡ºç™¼", map:"" },
                    { time:"10:55", title:"æŠµé”ä»å· (ICN)", desc:"å…¥å¢ƒç´„1hrã€‚æ­æ©Ÿå ´å¿«ç·š/å·´å£«å‰å¾€é£¯åº—ã€‚", map:"" },
                    { time:"14:00", title:"L7 é£¯åº— Check-in", desc:"å…ˆè®“2æ­²å¥³å…’åœ¨é£¯åº—ç¡åˆè¦ºã€‚å¤§äººè¼ªæµå»å¤§å»³æ›éŒ¢ã€‚", map:"L7 ëª…ë™", addr:"ì„œìš¸ ì¤‘êµ¬ í‡´ê³„ë¡œ 137" },
                    { 
                        type:"choice", title:"å…ç¨…åº—é¸æ“‡ (è¨˜å¾—å¸¶è­·ç…§)", desc:"ä¾é«”åŠ›èˆ‡å–œå¥½é¸æ“‡ï¼š",
                        choices: [
                            {n:"A. æ¨‚å¤©å…ç¨…åº— (ç¸½åº—)", desc:"å°±åœ¨é£¯åº—æ—ç™¾è²¨9-12Fã€‚æœ€æ–¹ä¾¿ä¸ç”¨ç§»å‹•ã€‚", target:"ë¡¯ë°ë©´ì„¸ì  ëª…ë™ë³¸ì "},
                            {n:"B. æ–°ä¸–ç•Œå…ç¨…åº—", desc:"æ­¥è¡Œ5åˆ†é˜ã€‚æœ‰ã€Œæ—‹è½‰é¦éŸ†ã€è£ç½®è—è¡“ã€‚", target:"ì‹ ì„¸ê³„ë©´ì„¸ì  ëª…ë™ì "},
                            {n:"C. æ–°ç¾…å…ç¨…åº—", desc:"æ­è¨ˆç¨‹è»Šç´„10-15åˆ†ã€‚å„ªæƒ åˆ¸å¤šï¼Œç¨ç«‹æ£Ÿã€‚", target:"ì‹ ë¼ë©´ì„¸ì  ì„œìš¸ì "}
                        ]
                    },
                    { 
                        title:"æ˜æ´å¤§è¡— æƒè²¨", desc:"Olive Young æ——è‰¦åº—å¯é€€ç¨…ã€‚å°å­©è‹¥å†·å¯èº²é€²æ——è‰¦åº—2Fã€‚", map:"ëª…ë™ê±°ë¦¬", addr:"ì„œìš¸ ì¤‘êµ¬ ëª…ë™8ë‚˜ê¸¸",
                        brands: ["emis", "Musinsa Standard", "Olive Young"]
                    },
                    { 
                        type:"meal", title:"æ˜æ´æ™šé¤é¸æ“‡", 
                        opts:[
                            {n:"æ˜æ´é¤ƒå­", k:"ëª…ë™êµì", t:"wait", tip:"ç±³å…¶æ—æ¨è–¦ï¼Œåˆ€åˆ‡éºµèˆ‡è’¸é¤ƒæ˜¯ç¶“å…¸ï¼Œè’œå‘³é‡", addr:"ì„œìš¸ ì¤‘êµ¬ ëª…ë™10ê¸¸ 29"},
                            {n:"è’è¬¬çš„ç”Ÿè‚‰", k:"ì—‰í„°ë¦¬ìƒê³ ê¸°", t:"walk", tip:"äº”èŠ±è‚‰å‰ªå°å¡Šçµ¦å°å­©ï¼Œæœ‰è’¸è›‹", addr:"ì„œìš¸ ì¤‘êµ¬ ëª…ë™4ê¸¸ 23"},
                            {n:"Jojo Kalguksu (å¸‚å»³åº—)", k:"ì¡°ì¡°ì¹¼êµ­ìˆ˜ ì‹œì²­ì ", t:"wait", tip:"é›¢æ˜æ´è¿‘çš„æ¸…çˆ½è›¤èœŠéºµ", addr:"ì„œìš¸ ì¤‘êµ¬ ì„¸ì¢…ëŒ€ë¡œ11ê¸¸ 27"}
                        ]
                    }
                ]
            },
            { 
                d: 2, date: "1/26 (ä¸€)", title: "å¤å®® & é¤ƒå­ & Jojo",
                items: [
                    { time:"10:00", title:"æ™¯ç¦å®® (å¯å€Ÿæ¨è»Š)", desc:"â˜…é‡é»ï¼šå†¬å¤©é¢¨å¤§ï¼Œå¹«å°å­©æˆ´å¸½å­ã€‚ç©¿éŸ“æœé€²å ´å…è²»ã€‚", map:"ê²½ë³µê¶", addr:"ì„œìš¸ ì¢…ë¡œêµ¬ ì‚¬ì§ë¡œ 161" },
                    { 
                        time:"12:30", type:"meal", title:"åˆé¤é¸æ“‡", 
                        opts:[
                            {n:"åœŸä¿—æ‘è”˜é›æ¹¯", k:"í† ì†ì´Œ", t:"walk", tip:"æœ€ç¶“å…¸è€åº—ï¼Œæœ‰ç‚•é©åˆå°å­©", addr:"ì„œìš¸ ì¢…ë¡œêµ¬ ìí•˜ë¬¸ë¡œ5ê¸¸ 5"},
                            {n:"ç½é ­é¤ƒå­ (Kkangtong)", k:"ê¹¡í†µë§Œë‘", t:"wait", tip:"å®‰åœ‹ç«™ååº—ï¼Œé¤ƒå­ç«é‹èˆ‡æ‹Œéºµè¶…äººæ°£", addr:"ì„œìš¸ ì¢…ë¡œêµ¬ ë¶ì´Œë¡œ2ê¸¸ 5-6"},
                            {n:"ç„¡å¢å±‹", k:"ë¬´ê¶í™”", t:"walk", tip:"æ¸…æ·¡æ¹¯é ­", addr:"ì„œìš¸ ì¢…ë¡œêµ¬ ì¸ì‚¬ë™10ê¸¸ 11-3"}
                        ]
                    },
                    { 
                        time:"14:30", title:"å—å¤§é–€ç«¥è£è¡—", desc:"â˜…é‡é»ï¼šå» Mama å’Œ Burdeg æ£Ÿã€‚è²·å®Œæˆ°åˆ©å“å¤šï¼Œç›´æ¥è¨ˆç¨‹è»Šå›é£¯åº—æ”¾ã€‚", map:"ë‚¨ëŒ€ë¬¸ì‹œì¥ ì•„ë™ë³µê±°ë¦¬", addr:"ì„œìš¸ ì¤‘êµ¬ ë‚¨ëŒ€ë¬¸ì‹œì¥8ê¸¸ 7",
                        brands: ["Porky (ä¼‘é–’)", "Aosta (è³ªæ„Ÿ)", "Mama æ£Ÿ", "Burdeng æ£Ÿ"]
                    },
                    { 
                        time:"18:00", type:"meal", title:"æ™šé¤ï¼šè›¤èœŠåˆ€å‰Šéºµ", 
                        opts:[
                            {n:"Jojo Kalguksu (å¸‚å»³åº—)", k:"ì¡°ì¡°ì¹¼êµ­ìˆ˜ ì‹œì²­ì ", t:"wait", tip: "ä¸»æ¨ï¼å—å¤§é–€æ—é‚Šã€‚æ»¿æ»¿è›¤èœŠé®®ç”œï¼Œæµ·é®®ç…é¤…å¿…é»ã€‚", addr: "ì„œìš¸ ì¤‘êµ¬ ì„¸ì¢…ëŒ€ë¡œ11ê¸¸ 27"},
                            {n:"å—å¤§é–€åˆ€å‰Šéºµè¡—", k:"ë‚¨ëŒ€ë¬¸ì‹œì¥ ì¹¼êµ­ìˆ˜ê³¨ëª©", t:"walk", tip:"å‚™æ¡ˆ: å·¨æ¿Ÿé£Ÿå ‚/éŸ“é †å­ (äººå¤šè¼ƒæ“ )", addr:"ì„œìš¸ ì¤‘êµ¬ ë‚¨ëŒ€ë¬¸ì‹œì¥4ê¸¸ 42-1"}
                        ]
                    },
                    { 
                        time:"20:00", title:"å›é£¯åº—ä¼‘æ¯", desc:"åƒé£½å–è¶³ï¼Œè‹¥é‚„æœ‰é«”åŠ›å¯å»æ±å¤§é–€DDPçœ‹å¤œæ™¯ï¼Œä¸ç„¶å»ºè­°æ—©é»ä¼‘æ¯ã€‚", map:"L7 ëª…ë™", addr:"ì„œìš¸ ì¤‘êµ¬ í‡´ê³„ë¡œ 137"
                    }
                ]
            },
            { 
                d: 3, date: "1/27 (äºŒ)", title: "è–æ°´æ´ & ç‹é·—äº­",
                items: [
                    { 
                        time:"10:30", title:"London Bagel Museum", desc:"å³¶å±±åº—ã€‚å…ˆç”¨CatchTableå€™ä½ï¼Œç­‰å¾…æ™‚å¯æ¨è»Šé€›é™„è¿‘ã€‚", map:"ëŸ°ë˜ë² ì´ê¸€ë®¤ì§€ì—„ ë„ì‚°ì ", addr:"ì„œìš¸ ê°•ë‚¨êµ¬ ì–¸ì£¼ë¡œ168ê¸¸ 33"
                    },
                    { 
                        time:"13:00", title:"è–æ°´æ´ (Seongsu)", desc:"ç›®å‰é¦–çˆ¾æœ€æ½®ã€‚å¹³æ—¥äººè¼ƒå°‘ã€‚çˆ¸çˆ¸å¯åœ¨å¤§å‹å’–å•¡å»³é¡§å°å­©ï¼Œåª½åª½å»é€› Diorã€‚", map:"ì„±ìˆ˜ë™ ì¹´í˜ê±°ë¦¬", addr:"ì„œìš¸ ì„±ë™êµ¬ ì—°ë¬´ì¥5ê¸¸ 7",
                        brands: ["Dior è–æ°´", "TAMBURINS", "ADER Error", "Stand Oil"]
                    },
                    { 
                        time:"16:00", title:"NUDAKE è–æ°´", desc:"ç‰¹æ®Šé€ å‹è›‹ç³•ï¼Œå®¤å…§æœ‰æš–æ°£é©åˆä¼‘æ¯ã€‚", map:"ëˆ„ë°ì´í¬ ì„±ìˆ˜", addr:"ì„œìš¸ ì„±ë™êµ¬ ì„±ìˆ˜ì´ë¡œ7ê¸¸ 26"
                    },
                    { 
                        type:"meal", title:"æ™šé¤ (å« Jojo è–æ°´åº—)", 
                        opts:[
                            {n:"Jojo Kalguksu (è–æ°´åº—)", k:"ì¡°ì¡°ì¹¼êµ­ìˆ˜ ì„±ìˆ˜ì ", t:"wait", tip:"è–æ°´ä¹Ÿæœ‰åˆ†åº—ï¼è‹¥æ˜¨å¤©æ²’åƒåˆ°å¯ä¾†é€™ã€‚", addr:"ì„œìš¸ ì„±ë™êµ¬ ì„±ìˆ˜ì¼ë¡œ8ê¸¸ 55"},
                            {n:"ç¥–å‚³ä¸‰ä»£é¦¬éˆ´è–¯æ¹¯", k:"ì†Œë¬¸ë‚œì„±ìˆ˜ê°ìíƒ•", t:"wait", tip:"ä¸è¾£çš„æ¹¯é ­éœ€ç‰¹åˆ¥å•ï¼Œå»ºè­°é»åˆ¥çš„æˆ–éæ°´", addr:"ì„œìš¸ ì„±ë™êµ¬ ì—°ë¬´ì¥ê¸¸ 45"}
                        ]
                    }
                ]
            },
            { 
                d: 4, date: "1/28 (ä¸‰)", title: "COEX æ°´æ—é¤¨ (è¦ªå­)",
                items: [
                    { time:"10:30", title:"COEX æ°´æ—é¤¨", desc:"â˜…é‡é»ï¼šå…¨å®¤å…§æš–æ°£ï¼Œå°å­©çœ‹ä¼éµé¯Šé­šè¶…é–‹å¿ƒã€‚ä¸ç”¨å¹å†·é¢¨ã€‚", map:"ì½”ì—‘ìŠ¤ ì•„ì¿ ì•„ë¦¬ì›€", addr:"ì„œìš¸ ê°•ë‚¨êµ¬ ì˜ë™ëŒ€ë¡œ 513" },
                    { 
                        time:"13:00", title:"æ˜Ÿç©ºåœ–æ›¸é¤¨", desc:"å°±åœ¨æ°´æ—é¤¨æ—ã€‚å·¨å‹æ›¸ç‰†æ‹ç…§ã€‚COEX Mall å…§æœ‰é«˜ç´šè‚²å¬°å®¤ã€‚", map:"ë³„ë§ˆë‹¹ ë„ì„œê´€", addr:"ì„œìš¸ ê°•ë‚¨êµ¬ ì˜ë™ëŒ€ë¡œ 513 B1"
                    },
                    { 
                        time:"16:00", title:"å¥‰æ©å¯º / é€›è¡—", desc:"å¦‚æœå¤©æ°£å¥½å¯å»å°é¢å¥‰æ©å¯ºï¼Œä¸ç„¶ç¹¼çºŒé€› COEX Mallã€‚", map:"ë´‰ì€ì‚¬", addr:"ì„œìš¸ ê°•ë‚¨êµ¬ ë´‰ì€ì‚¬ë¡œ 531"
                    },
                    { 
                        type:"meal", title:"æ±Ÿå—å€æ™šé¤", 
                        opts:[{n:"Eggslut", k:"", t:"app", tip:"ç¾å¼æ¼¢å ¡", addr:"COEX 1F"}, {n:"é»‘è±šå®¶", k:"í‘ëˆê°€", t:"res", tip:"æ¿Ÿå·å³¶é»‘è±¬è‚‰ï¼Œä¸è¾£", addr:"ì„œìš¸ ê°•ë‚¨êµ¬ ë´‰ì€ì‚¬ë¡œ86ê¸¸ 14"}]
                    }
                ]
            },
            { 
                d: 5, date: "1/29 (å››)", title: "å®¤å…§å‹•ç‰©åœ’ & ç¾ä»£ç™¾è²¨",
                items: [
                    { 
                        time:"11:30", title:"Zoolung Zoolung", desc:"â˜…é‡é»ï¼šæ°¸ç™»æµ¦åº—å®¤å…§å‹•ç‰©åœ’ã€‚å»ºè­°å…ˆæŸ¥æœ€æ—©å ´æ¬¡(é€šå¸¸12é»ï¼Œå¯’å‡å¯èƒ½ææ—©)ã€‚", map:"ì£¼ë ì£¼ë  ì˜ë“±í¬", addr:"ì„œìš¸ ì˜ë“±í¬êµ¬ ì˜ì¤‘ë¡œ 15 4F"
                    },
                    { 
                        time:"14:00", title:"The Hyundai Seoul", desc:"å‹•ç‰©åœ’çµæŸå¾Œæ­è»Šä¾†ã€‚B1ç¾é£Ÿè¡—åƒåˆé¤ï¼Œ5Få®¤å…§èŠ±åœ’è®“å°å­©åˆç¡/ä¼‘æ¯ã€‚", map:"ë”í˜„ëŒ€ ì„œìš¸", addr:"ì„œìš¸ ì˜ë“±í¬êµ¬ ì—¬ì˜ëŒ€ë¡œ 108",
                        brands: ["Matin Kim", "Marithe", "Arket", "Blue Bottle"]
                    },
                    { 
                        time:"18:30", title:"å¼˜å¤§å•†åœˆ (Hongdae)", desc:"æ™šä¸Šè‹¥é‚„æœ‰é«”åŠ›å†å»ã€‚å¹´è¼•äººæ°£æ°›ï¼Œæ¨è»Šå»ºè­°èµ°å¤§é¦¬è·¯ã€‚", map:"í™ëŒ€ì…êµ¬ì—­", addr:"ì„œìš¸ ë§ˆí¬êµ¬ ì–‘í™”ë¡œ 160",
                        brands: ["ABC Mart", "Shoopen", "Chuu", "AK Plaza"]
                    },
                    { 
                        type:"meal", title:"å¼˜å¤§å»¶å—æ´æ™šé¤", 
                        opts:[
                            {n:"çŒªè„šå°å§", k:"ë¯¸ì“°ì¡±ë°œ", t:"wait", tip:"åŸå‘³è±¬è…³å°å­©å¯åƒ(çš®å‰ªæ‰)", addr:"ì„œìš¸ ë§ˆí¬êµ¬ ì–´ìš¸ë§ˆë‹¹ë¡œ 123-1"}
                        ]
                    }
                ]
            },
            { 
                d: 6, date: "1/30 (äº”)", title: "æ¼¢å—æ´ & è¶…å¸‚æ¡è³¼",
                items: [
                    { 
                        time:"10:30", title:"æ¼¢å—æ´ (Hannam)", desc:"âš ï¸æ³¨æ„ï¼šå¡é“å¤šï¼Œæ¨è»Šè¾›è‹¦ã€‚å»ºè­°å®šé»é€›(Mardi/Rockfish)ã€‚", map:"í•œê°•ì§„ì—­", addr:"ì„œìš¸ ìš©ì‚°êµ¬ ì´íƒœì›ë¡œ 272",
                        brands: ["Mardi Mercredi", "Nonfiction", "Rockfish", "Depound"]
                    },
                    { 
                        time:"17:00", title:"æ¨‚å¤©è¶…å¸‚ (é¦–çˆ¾ç«™)", desc:"æœ€å¾Œæ¡è²·ã€‚é€™è£¡æœ‰æ‰“åŒ…å€ã€‚è²·å®Œæ­è¨ˆç¨‹è»Šå›é£¯åº—æ‰“åŒ…ã€‚", map:"ë¡¯ë°ë§ˆíŠ¸ ì„œìš¸ì—­ì ", addr:"ì„œìš¸ ì¤‘êµ¬ í•œê°•ëŒ€ë¡œ 405"
                    },
                    { 
                        type:"meal", title:"æœ€å¾Œæ™šé¤", 
                        opts:[{n:"å­”é™µä¸€éš»é›", k:"ê³µë¦‰ë‹­í•œë§ˆë¦¬", t:"walk", tip:"é›æ¹¯åº•ä¸è¾£ï¼Œæœ€å¾Œç…®ç²¥å°å­©æ„›åƒ", addr:"ì„œìš¸ ì„œëŒ€ë¬¸êµ¬ ì—°ì„¸è·¯2ë‹¤ê¸¸ 54"}, {n:"BHC ç‚¸é›", k:"BHCì¹˜í‚¨", t:"app", tip:"å¤–å¸¶å›é£¯åº—åƒæœ€è¼•é¬†", addr:"æ˜æ´å¤šåˆ†åº—"}]
                    }
                ]
            },
            { 
                d: 7, date: "1/31 (å…­)", title: "è¿”å° (ç„¡è¡Œç¨‹)",
                items: [
                    { time:"08:30", title:"Check-out å‡ºç™¼", desc:"é€™å¤©æ²’æ™‚é–“é€›ã€‚å»ºè­°å«åŒ…è»Šæˆ–æ­æ©Ÿå ´å·´å£«/å¿«ç·šå‰å¾€æ©Ÿå ´ã€‚", map:"" },
                    { time:"12:00", title:"CI 0165 èµ·é£›", desc:"ICN -> KHHã€‚æ©Ÿå ´å…§æœ‰å…’ç«¥éŠæˆ²å€å¯æ”¾é›»ã€‚", map:"ì¸ì²œêµ­ì œê³µí•­" },
                    { time:"14:15", title:"æŠµé”é«˜é›„", desc:"ç”œèœœçš„å®¶ã€‚", map:"" }
                ]
            }
        ]
    };

    // ================= CONTROLLER =================
    
    window.onload = function() {
        renderDaySlider();
        renderDayContent(0);
        updateWeather();
        updateRate();
    };

    function switchView(viewId, btn) {
        ['plan', 'calc', 'guide'].forEach(id => {
            document.getElementById('view-' + id).classList.add('hidden');
        });
        document.getElementById('view-' + viewId).classList.remove('hidden');
        document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        window.scrollTo({top: 0, behavior: 'smooth'});
    }

    // --- Render Slider ---
    function renderDaySlider() {
        const slider = document.getElementById('day-slider');
        slider.innerHTML = APP_DATA.itinerary.map((d, i) => `
            <div class="day-chip ${i === 0 ? 'active' : ''}" onclick="selectDay(${i}, this)">
                <span class="day-chip-num">Day ${d.d}</span>
                <span class="day-chip-date">${d.date.split(' ')[0]}</span>
            </div>
        `).join('');
    }

    function selectDay(index, el) {
        document.querySelectorAll('.day-chip').forEach(c => c.classList.remove('active'));
        el.classList.add('active');
        el.scrollIntoView({behavior: 'smooth', block: 'nearest', inline: 'center'});
        
        const content = document.getElementById('day-content');
        content.style.opacity = '0';
        content.style.transform = 'translateY(5px)';
        content.style.transition = 'all 0.2s';
        
        setTimeout(() => {
            renderDayContent(index);
            content.style.opacity = '1';
            content.style.transform = 'translateY(0)';
        }, 150);
    }

    // --- Render Content ---
    function renderDayContent(index) {
        const data = APP_DATA.itinerary[index];
        const container = document.getElementById('day-content');
        
        let html = `
            <div class="ios-card" style="padding:20px; text-align:center; background:linear-gradient(to bottom, #fff, #fafafa);">
                <div style="font-size:20px; font-weight:800; color:var(--text-main);">${data.title}</div>
                <div style="font-size:14px; color:var(--text-sub); margin-top:4px;">${data.date}</div>
            </div>
        `;

        data.items.forEach(ev => {
            const copyBtn = (addr) => addr ? `
                <div class="addr-btn" onclick="copyToClip('${addr}', event)">
                    <i class="fa-regular fa-copy"></i> è¤‡è£½åœ°å€
                </div>` : '';

            if (ev.type === 'meal') {
                html += `
                <div class="ios-card">
                    <div style="padding:12px 16px; background:#f9f9f9; border-bottom:0.5px solid rgba(0,0,0,0.05); display:flex; justify-content:space-between; align-items:center;">
                        <div style="font-weight:700; color:var(--text-main); display:flex; align-items:center; gap:6px;">
                            <i class="fa-solid fa-utensils" style="color:#D4A373;"></i> ${ev.title}
                        </div>
                        ${ev.time ? `<span class="time-badge">${ev.time}</span>` : ''}
                    </div>
                    <div>
                        ${ev.opts.map(opt => {
                            let tagClass = opt.t === 'app' ? 'tag-app' : (opt.t === 'res' ? 'tag-res' : 'tag-wait');
                            let tagText = opt.t === 'app' ? 'App' : (opt.t === 'res' ? 'é ç´„' : 'æ’éšŠ');
                            let link = opt.k ? `https://m.map.naver.com/search2/search.naver?query=${encodeURIComponent(opt.k)}` : '#';
                            return `
                            <div class="ios-list-item">
                                <a href="${link}" target="_blank" class="item-left" style="text-decoration:none; color:inherit;">
                                    <div class="item-title">${opt.n}</div>
                                    <div class="item-desc">${opt.tip || ''}</div>
                                </a>
                                <div class="item-right">
                                    <span class="tag ${tagClass}">${tagText}</span>
                                    ${copyBtn(opt.addr)}
                                </div>
                            </div>`;
                        }).join('')}
                    </div>
                </div>`;
            } 
            else if (ev.type === 'choice') {
                html += `
                <div class="ios-card" style="border: 2px dashed var(--border); background:#FAFAFA; padding:16px;">
                    <div style="text-align:center; font-weight:700; color:var(--primary-dark); margin-bottom:12px;">${ev.title}</div>
                    ${ev.choices.map((c, idx) => `
                    <a href="https://m.map.naver.com/search2/search.naver?query=${encodeURIComponent(c.target)}" target="_blank" class="ios-list-item" style="border-radius:12px; margin-bottom:8px; border:1px solid #eee;">
                        <div class="item-left">
                            <span style="font-size:10px; font-weight:800; background:${idx===0?'var(--text-main)':'var(--primary)'}; color:white; padding:2px 6px; border-radius:4px; margin-right:6px;">${c.n}</span>
                            <span style="font-weight:700;">${c.desc}</span>
                        </div>
                        <div class="item-right">
                            <i class="fa-solid fa-chevron-right" style="font-size:12px; color:#ccc;"></i>
                        </div>
                    </a>`).join('')}
                </div>`;
            } 
            else {
                let link = ev.map ? `https://m.map.naver.com/search2/search.naver?query=${encodeURIComponent(ev.map)}` : null;
                html += `
                <div class="ios-card">
                    <div class="ios-list-item" style="cursor:default;">
                        <div class="item-left">
                            <div class="item-title" onclick="${link ? `window.open('${link}')` : ''}">${ev.title}</div>
                            <div class="item-desc" style="margin-top:2px;">${ev.desc}</div>
                            ${ev.brands ? `
                            <div class="brand-list">
                                ${ev.brands.map(b => {
                                    let isMust = b.includes('Mama') || b.includes('Zoolung') || b.includes('Dior');
                                    return `<span class="brand-tag ${isMust?'tag-baby':''}">${b}</span>`
                                }).join('')}
                            </div>` : ''}
                        </div>
                        <div class="item-right">
                            ${ev.time ? `<span class="time-badge">${ev.time}</span>` : ''}
                            ${copyBtn(ev.addr)}
                        </div>
                    </div>
                </div>`;
            }
        });
        container.innerHTML = html;
    }

    // --- Weather ---
    async function updateWeather() {
        const tempEl = document.getElementById('wc-temp');
        const descEl = document.getElementById('wc-desc');
        const iconEl = document.getElementById('wc-icon');
        
        descEl.innerText = "æ›´æ–°ä¸­...";
        
        try {
            const res = await fetch('https://api.open-meteo.com/v1/forecast?latitude=37.5665&longitude=126.9780&current=temperature_2m,weather_code&timezone=Asia%2FSeoul');
            if(!res.ok) throw new Error();
            const d = await res.json();
            const temp = Math.round(d.current.temperature_2m);
            const code = d.current.weather_code;
            
            tempEl.innerText = `${temp}Â°C`;
            let iconClass = 'fa-sun';
            let descText = 'æ™´æœ—';
            
            if(code > 2) { iconClass = 'fa-cloud'; descText = 'å¤šé›²'; }
            if(code >= 51) { iconClass = 'fa-cloud-rain'; descText = 'æœ‰é›¨'; }
            if(code >= 71) { iconClass = 'fa-snowflake'; descText = 'ä¸‹é›ª'; }
            if(temp < 0) { descText += " (æ¥µå†·)"; iconClass = 'fa-snowflake'; }
            
            iconEl.className = `fa-solid ${iconClass}`;
            descEl.innerText = `é¦–çˆ¾ç›®å‰ ${descText}`;
            
        } catch(e) {
            tempEl.innerText = "-5Â°"; 
            descEl.innerText = "é è¨­: å¯’å†·";
            iconEl.className = 'fa-solid fa-snowflake';
        }
    }

    // --- Calc & Tools ---
    function calculateAll() {
        const inputEl = document.getElementById('calc-input');
        let raw = inputEl.value.replace(/[^0-9.]/g, '');
        let val = parseFloat(raw);
        if(isNaN(val)) {
            document.getElementById('res-twd').innerText = '0';
            document.getElementById('res-tax').innerText = '0';
            return;
        }
        document.getElementById('res-twd').innerText = Math.round(val * APP_DATA.rate).toLocaleString();
        
        let r = 0;
        if (val >= 30000 && val < 50000) r = 1500;
        else if (val >= 50000 && val < 75000) r = 3500;
        else if (val >= 75000 && val < 100000) r = 5000;
        else if (val >= 100000) r = Math.floor(val * 0.06);
        document.getElementById('res-tax').innerText = 'â‚© ' + r.toLocaleString();
    }

    function resetCalc() {
        document.getElementById('calc-input').value = '';
        calculateAll();
    }

    function updateRate() {
        fetch('https://api.exchangerate-api.com/v4/latest/KRW')
            .then(r=>r.json()).then(d=>{
                if(d.rates.TWD) {
                    APP_DATA.rate = d.rates.TWD;
                    document.getElementById('rate-display').innerText = APP_DATA.rate.toFixed(4);
                }
            }).catch(()=>{});
    }

    function copyToClip(text, e) {
        if(e) e.stopPropagation();
        if (!text) return;
        
        navigator.clipboard.writeText(text).then(() => {
            const t = document.getElementById('toast');
            t.classList.add('show');
            setTimeout(() => t.classList.remove('show'), 2000);
        }).catch(err => {
            const input = document.createElement('textarea');
            input.value = text;
            document.body.appendChild(input);
            input.select();
            document.execCommand('copy');
            document.body.removeChild(input);
            const t = document.getElementById('toast');
            t.classList.add('show');
            setTimeout(() => t.classList.remove('show'), 2000);
        });
    }

    function openModal(big, sub) {
        document.getElementById('m-big').innerText = big;
        document.getElementById('m-sub').innerText = sub;
        const m = document.getElementById('modal');
        m.style.display='flex';
        requestAnimationFrame(()=>m.classList.add('show'));
    }
    function closeModal() {
        const m = document.getElementById('modal');
        m.classList.remove('show');
        setTimeout(()=>m.style.display='none', 300);
    }
</script>
</body>
</html>

