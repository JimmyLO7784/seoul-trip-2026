<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="theme-color" content="#FDFBF7">
    <meta name="format-detection" content="telephone=no">
    <title>é¦–çˆ¾ 2026</title>
    
    <!-- é é€£ç·šåŠ é€Ÿ -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://cdnjs.cloudflare.com">

    <!-- åœ–ç¤ºåº« -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" media="print" onload="this.media='all'">
    
    <!-- åœ“é«”å­—å‹ -->
    <link href="https://fonts.googleapis.com/css2?family=M+PLUS+Rounded+1c:wght@400;500;700;800&display=swap" rel="stylesheet">
    
    <style>
        /* --- æ ¸å¿ƒè¨­è¨ˆç³»çµ± (æº«æ½¤å¥¶èŒ¶è‰²) --- */
        :root {
            /* åŸºåº•è‰² */
            --bg: #FDFBF7;          /* ç‡•éº¥å¥¶ç™½ */
            --surface: #FFFFFF;     /* ç´”ç™½ */
            
            /* æ–‡å­—è‰² */
            --text-main: #4A403A;   /* æ·±å’–å•¡ */
            --text-sub: #9C8F85;    /* æ·ºç°å’– */
            
            /* é‡é»è‰² */
            --primary: #C8A47E;     /* ç„¦ç³–è‰² */
            --primary-bg: #F5EFE6;  /* æ·ºç„¦ç³–åº• */
            
            /* åŠŸèƒ½è‰² */
            --green: #88B04B;       /* é ç´„/æˆåŠŸ */
            --red: #E08E79;         /* æ’éšŠ/è­¦å‘Š */
            --blue: #8FB8CA;        /* è³‡è¨Š/é€£çµ */
            
            /* ä»‹é¢ç´°ç¯€ */
            --border: #EEEAE4;
            --shadow: 0 4px 20px rgba(149, 133, 119, 0.06);
            --radius: 20px;
            
            /* å®‰å…¨å€åŸŸ */
            --safe-top: env(safe-area-inset-top, 20px);
            --safe-bottom: env(safe-area-inset-bottom, 20px);
        }

        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        
        body {
            margin: 0; padding: 0;
            background-color: var(--bg);
            color: var(--text-main);
            font-family: "M PLUS Rounded 1c", -apple-system, BlinkMacSystemFont, sans-serif;
            font-size: 15px;
            line-height: 1.5;
            overscroll-behavior-y: none;
            user-select: none; /* é˜²æ­¢èª¤è§¸åç™½ */
        }

        /* --- Header --- */
        header {
            position: fixed; top: 0; left: 0; right: 0; z-index: 1000;
            background: rgba(249, 247, 242, 0.95);
            backdrop-filter: blur(12px);
            padding: calc(10px + var(--safe-top)) 20px 10px 20px;
            display: flex; justify-content: space-between; align-items: center;
            border-bottom: 1px solid rgba(0,0,0,0.02);
        }
        h1 { margin: 0; font-size: 20px; font-weight: 800; color: var(--text-main); letter-spacing: 1px; }
        .weather-pill {
            font-size: 12px; font-weight: 700; color: var(--text-sub);
            background: var(--surface); padding: 6px 14px; border-radius: 99px;
            box-shadow: 0 2px 6px rgba(0,0,0,0.03); display: flex; align-items: center; gap: 6px;
            border: 1px solid var(--border);
        }

        /* --- Main Content --- */
        main {
            padding: calc(70px + var(--safe-top)) 16px calc(90px + var(--safe-bottom)) 16px;
            min-height: 100vh;
        }

        /* --- æ—¥æœŸæ»‘å‹•æ¢ (Day Slider) --- */
        .slider-container {
            margin: 0 -16px 20px -16px; padding: 0 16px;
            overflow-x: auto; display: flex; gap: 8px;
            scrollbar-width: none; scroll-behavior: smooth;
        }
        .slider-container::-webkit-scrollbar { display: none; }
        
        .chip {
            flex: 0 0 auto; min-width: 64px;
            background: transparent;
            border-radius: 16px; padding: 10px 0;
            text-align: center; cursor: pointer;
            transition: all 0.2s cubic-bezier(0.25, 0.8, 0.25, 1);
            color: var(--text-sub); border: 1px solid transparent;
        }
        .chip.active {
            background: var(--surface); color: var(--primary);
            box-shadow: var(--shadow); font-weight: 800;
            border-color: var(--border); transform: translateY(-2px);
        }
        .chip-lbl { font-size: 11px; opacity: 0.8; margin-bottom: 2px; }
        .chip-val { font-size: 15px; }

        /* --- å¡ç‰‡å…ƒä»¶ --- */
        .card {
            background: var(--surface); border-radius: var(--radius); padding: 20px;
            margin-bottom: 16px; box-shadow: var(--shadow);
            position: relative; overflow: hidden; border: 1px solid transparent;
            transition: transform 0.1s;
        }
        .card:active { transform: scale(0.99); }
        
        .card-header { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 12px; }
        .card-title { font-size: 17px; font-weight: 800; color: var(--text-main); line-height: 1.4; flex: 1; }
        .card-time { 
            font-family: monospace; font-size: 12px; color: var(--text-sub); font-weight: 700;
            background: var(--primary-bg); padding: 4px 8px; border-radius: 8px; white-space: nowrap; margin-left: 8px;
        }
        .card-desc { font-size: 14px; color: var(--text-sub); margin-bottom: 0px; line-height: 1.6; }
        
        /* åˆ—è¡¨é …ç›® */
        .list-item {
            display: flex; justify-content: space-between; align-items: center;
            padding: 12px 14px; background: var(--bg); border-radius: 12px;
            text-decoration: none; color: inherit; margin-top: 8px; transition: background 0.1s;
        }
        .list-item:active { background: #EFEBE5; }
        .item-name { font-weight: 700; font-size: 14px; color: var(--text-main); }
        
        /* æ¨™ç±¤ */
        .badge { font-size: 10px; padding: 3px 8px; border-radius: 6px; font-weight: 700; white-space: nowrap; margin-left: 8px; }
        .b-app { color: #B45309; background: #FFF7ED; }
        .b-res { color: #047857; background: #ECFDF5; }
        .b-walk { color: #BE123C; background: #FFF1F2; }
        .b-tip { color: #1D4ED8; background: #EFF6FF; } /* å¿…åƒ */
        
        /* å¿…é€›å“ç‰Œ */
        .brands { margin-top: 14px; display: flex; flex-wrap: wrap; gap: 6px; padding-top: 14px; border-top: 1px dashed var(--border); }
        .brand-tag { font-size: 11px; color: var(--text-main); background: var(--bg); padding: 4px 10px; border-radius: 8px; border: 1px solid var(--border); font-weight: 500; }

        /* æ¯æ—¥æ”»ç•¥ Note */
        .guide-note {
            background: #FFF9C4; border: 1px dashed #FBC02D; border-radius: 16px; padding: 16px; margin-bottom: 20px;
        }
        .guide-title { font-size: 13px; font-weight: 800; color: #F57F17; margin-bottom: 8px; text-transform: uppercase; letter-spacing: 1px; display: flex; align-items: center; gap: 6px;}
        .guide-content { font-size: 14px; color: #5D4037; line-height: 1.6; }
        .guide-content li { margin-bottom: 4px; position: relative; padding-left: 12px; }
        .guide-content li::before { content: "â€¢"; position: absolute; left: 0; color: #F57F17; }

        /* --- è¨ˆç®—æ©Ÿ (æ¥µç°¡åŒ–) --- */
        .calc-box {
            background: var(--surface); border-radius: var(--radius); padding: 24px;
            text-align: right; margin-bottom: 16px; border: 1px solid var(--border);
        }
        .calc-label { font-size: 12px; font-weight: 700; color: var(--text-sub); display: block; margin-bottom: 4px; text-align: left;}
        .calc-input {
            width: 100%; border: none; background: transparent; text-align: right;
            font-size: 44px; font-weight: 300; color: var(--text-main); outline: none;
            font-family: monospace; padding: 0; margin: 0;
        }
        .calc-input::placeholder { color: #E0D8D0; }
        
        .result-row {
            display: flex; justify-content: space-between; align-items: center;
            padding: 14px 0; border-top: 1px dashed var(--border); margin-top: 12px;
        }
        .res-val { font-size: 20px; font-weight: 700; color: var(--text-main); font-family: monospace; }
        .res-tax { font-size: 18px; font-weight: 700; color: var(--green); font-family: monospace; }

        /* --- éŸ“èªå¡ (å¤§æŒ‰éˆ•) --- */
        .grid-2 { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; }
        .k-card {
            background: var(--surface); border-radius: 16px; padding: 16px;
            text-align: center; cursor: pointer; border: 1px solid var(--border);
            box-shadow: var(--shadow); transition: transform 0.1s;
        }
        .k-card:active { transform: scale(0.96); border-color: var(--primary); }
        .k-big { font-size: 16px; font-weight: 800; color: var(--text-main); margin-bottom: 4px; }
        .k-sub { font-size: 11px; color: var(--text-sub); }

        /* --- åº•éƒ¨å°èˆª (æ‡¸æµ®) --- */
        .nav-dock {
            position: fixed; bottom: 30px; left: 50%; transform: translateX(-50%);
            background: rgba(255, 255, 255, 0.95); backdrop-filter: blur(16px);
            padding: 10px 30px; border-radius: 99px; display: flex; gap: 40px; align-items: center;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1); border: 1px solid rgba(0,0,0,0.05); z-index: 1000;
        }
        .nav-btn {
            border: none; background: none; display: flex; flex-direction: column; align-items: center;
            color: #D1D5DB; transition: all 0.2s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        .nav-btn.active { color: var(--primary); transform: scale(1.2); }
        .nav-btn i { font-size: 22px; }

        .hidden { display: none !important; }
        
        /* Modal */
        .modal {
            position: fixed; inset: 0; background: rgba(94, 80, 70, 0.6); backdrop-filter: blur(4px);
            z-index: 2000; display: none; align-items: center; justify-content: center;
        }
        .modal-box { 
            background: var(--surface); width: 85%; max-width: 300px; border-radius: 24px; padding: 32px;
            text-align: center; box-shadow: 0 20px 60px rgba(0,0,0,0.2); animation: pop 0.2s;
        }
        @keyframes pop { from {transform: scale(0.9); opacity:0;} to {transform: scale(1); opacity:1;} }
        
        /* Toast */
        #toast {
            position: fixed; top: 90px; left: 50%; transform: translateX(-50%);
            background: var(--text-main); color: white; padding: 8px 16px; border-radius: 20px;
            font-size: 12px; font-weight: 700; opacity: 0; transition: opacity 0.3s; pointer-events: none; z-index: 3000;
        }
        #toast.show { opacity: 1; }

        /* Naver Btn */
        .btn-naver {
            width: 28px; height: 28px; border-radius: 50%; background: var(--surface);
            color: #03C75A; display: flex; align-items: center; justify-content: center;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05); border: 1px solid rgba(0,0,0,0.05);
            font-size: 12px; flex-shrink: 0; text-decoration: none;
        }
    </style>
</head>
<body>

    <header>
        <h1>SEOUL</h1>
        <div class="weather-pill" id="w-widget">
            <i class="fa-solid fa-spinner fa-spin"></i> è¼‰å…¥ä¸­
        </div>
    </header>

    <div id="toast">å·²è¤‡è£½åœ°å€</div>

    <main>
        
        <!-- 1. è¡Œç¨‹ (Plan) -->
        <div id="view-plan">
            <div class="slider-container" id="day-slider"></div>
            <div id="day-content"></div>
        </div>

        <!-- 2. è¨ˆç®— (Calc) -->
        <div id="view-calc" class="hidden">
            <div class="calc-box">
                <span class="calc-label">è¼¸å…¥éŸ“å¹£é‡‘é¡ (KRW)</span>
                <!-- inputmode="decimal" å–šèµ·æ•¸å­—éµç›¤ -->
                <input type="text" inputmode="decimal" id="calc-in" class="calc-input" placeholder="0" oninput="formatInput(this); calculate()">
                
                <div class="result-row">
                    <span style="font-size:13px; color:var(--text-sub);">ç´„åˆå°å¹£</span>
                    <span class="res-val" id="res-twd">0</span>
                </div>
                <div class="result-row" style="border-top:none; padding-top:0;">
                    <span style="font-size:13px; color:var(--text-sub);">é è¨ˆé€€ç¨…</span>
                    <span class="res-tax" id="res-tax">0</span>
                </div>
            </div>
            <div style="text-align:center; font-size:12px; color:var(--text-sub); margin-top:24px; opacity:0.6; font-weight: 500;">
                å³æ™‚åŒ¯ç‡ 1 : <span id="rate-disp">0.024</span> â€¢ æ»¿ 3è¬é€€ç¨…
            </div>
        </div>

        <!-- 3. æ”»ç•¥ (Guide) -->
        <div id="view-guide" class="hidden">
            <div style="text-align:center; font-size:12px; font-weight:700; color:var(--primary); margin-bottom:16px; letter-spacing:1px;">SURVIVAL KOREAN</div>
            <div class="grid-2" id="korean-grid"></div>

            <div style="text-align:center; font-size:12px; font-weight:700; color:var(--primary); margin:40px 0 16px; letter-spacing:1px;">LINKS</div>
            <div class="card" style="padding:0; overflow:hidden;">
                <a href="https://m.map.naver.com/" target="_blank" class="list-item" style="margin:0; border-radius:0; border-bottom:1px solid var(--border);">
                    <span style="font-weight:700; color:#03C75A;"><i class="fa-solid fa-map"></i> Naver Map åœ°åœ–</span> <i class="fa-solid fa-chevron-right" style="font-size:10px; color:#ccc;"></i>
                </a>
                <a href="https://n.weather.naver.com/" target="_blank" class="list-item" style="margin:0; border-radius:0;">
                    <span style="font-weight:700; color:#3b82f6;"><i class="fa-solid fa-cloud"></i> Naver Weather å¤©æ°£</span> <i class="fa-solid fa-chevron-right" style="font-size:10px; color:#ccc;"></i>
                </a>
            </div>
        </div>

    </main>

    <div class="nav-dock">
        <button class="nav-btn active" onclick="setView('plan', this)"><i class="fa-regular fa-calendar-check"></i></button>
        <button class="nav-btn" onclick="setView('calc', this)"><i class="fa-solid fa-calculator"></i></button>
        <button class="nav-btn" onclick="setView('guide', this)"><i class="fa-regular fa-compass"></i></button>
    </div>

    <!-- Modal -->
    <div id="modal" class="modal" onclick="closeModal()">
        <div class="modal-box" onclick="event.stopPropagation()">
            <div id="m-big" class="modal-big"></div>
            <div id="m-sub" style="font-size:15px; color:var(--text-sub); margin-bottom:32px; font-weight: 500;"></div>
            <div style="font-size:13px; color:var(--primary); font-weight:800; cursor:pointer;" onclick="closeModal()">CLOSE</div>
        </div>
    </div>

    <script>
        // --- DATA ---
        const ITINERARY = [
            { 
                d: 1, date: "1/25 (æ—¥)", title: "æŠµé” & æ˜æ´",
                guide: "<li><strong>æ›éŒ¢ï¼š</strong>å»å¤§ä½¿é¤¨/ä¸€å“é¦™ã€‚</li><li><strong>å…ç¨…ï¼š</strong>è­·ç…§å¿…å¸¶ï¼åœ‹éš›ç‰Œæ©Ÿå ´æè²¨ã€‚</li>",
                items: [
                    { time:"13:00", title:"L7 é£¯åº—", desc:"å¯„æ”¾è¡Œæ / å¤§å»³æ›éŒ¢", map:"L7 ëª…ë™" },
                    { time:"13:30", type:"meal", title:"åˆé¤ä¸‰é¸ä¸€", opts:[{n:"æ˜æ´é¤ƒå­", k:"ëª…ë™êµì", t:"walk", tip:"äººå¤š"}, {n:"ç¥ä»™é›ªæ¿ƒæ¹¯", k:"ì‹ ì„ ì„¤ë†íƒ•", t:"walk", tip:"æ’éšŠ"}, {n:"æ²³æ±é¤¨", k:"í•˜ë™ê´€", t:"walk", tip:"è€åº—"}] },
                    { time:"14:30", title:"å…ç¨…åº—è³¼ç‰©", desc:"æ–°ä¸–ç•Œ + æ¨‚å¤©ç¸½åº—", map:"ì‹ ì„¸ê³„ë©´ì„¸ì  ëª…ë™ì ", brands:["Gentle Monster", "Tamburins"] },
                    { time:"18:00", title:"æ˜æ´æƒè²¨", desc:"é£¯åº—æ¨“ä¸‹æˆ°å€", map:"ë¬´ì‹ ì‚¬ ìŠ¤íƒ ë‹¤ë“œ ëª…ë™", brands:["emis", "The North Face", "Musinsa", "NB"] },
                    { time:"19:00", type:"meal", title:"æ™šé¤ï¼šéŸ“å¼çƒ¤è‚‰", opts:[{n:"ç‹å¦ƒå®¶", k:"ì™•ë¹„ì§‘", t:"res"}, {n:"é»ƒé‡‘ç‰§å ´", k:"í™©ê¸ˆëª©ì¥", t:"res"}, {n:"è’è¬¬çš„ç”Ÿè‚‰", k:"ì—‰í„°ë¦¬ìƒê³ ê¸°", t:"walk"}] }
                ]
            },
            { 
                d: 2, date: "1/26 (ä¸€)", title: "å¤å®® & æ‰¹ç™¼",
                guide: "<li><strong>æ‰¹ç™¼ï¼š</strong>æ™šä¸Š8é»é–‹ã€‚ä¸é›¶å”®ï¼Œå¯å• 'One piece okay?'ã€‚</li><li><strong>æ”»ç•¥ï¼š</strong>è²·å®Œç«¥è£å…ˆå›é£¯åº—æ”¾è²¨ï¼Œå†å»åˆäº•ã€‚</li>",
                items: [
                    { time:"09:30", title:"æ™¯ç¦å®®", desc:"ç©¿éŸ“æœé€²å ´å…è²» (é ç´„9:30)", map:"ê²½ë³µê¶" },
                    { time:"12:00", type:"meal", title:"åˆé¤ï¼šè¥¿æ‘", opts:[{n:"åœŸä¿—æ‘è”˜é›æ¹¯", k:"í† ì†ì´Œ", t:"walk"}, {n:"ç½é ­é¤ƒå­", k:"ê¹¡í†µë§Œë‘", t:"app"}, {n:"é€šä»å¸‚å ´", k:"í†µì¸ì‹œì¥", t:"walk"}] },
                    { time:"13:30", title:"å—å¤§é–€ç«¥è£", desc:"åªæ”¶ç¾é‡‘ï¼è«‹å‚™è¶³éŸ“å¹£ã€‚", map:"ë‚¨ëŒ€ë¬¸ì‹œì¥ ì•„ë™ë³µê±°ë¦¬", brands:["Burdeng", "Mama", "Porky"] },
                    { time:"15:30", title:"å›é£¯åº—æ”¾è²¨", desc:"èµ°è·¯å› L7 æ”¾æˆ°åˆ©å“ï¼Œè¼•è£å‡ºç™¼ã€‚", map:"L7 ëª…ë™" },
                    { time:"16:00", title:"Folnua", desc:"åˆäº•ç«™ Showroom", map:"í´ë‰´ì•„ ì‡¼ë£¸", brands:["Folnua"] },
                    { time:"18:00", type:"meal", title:"æ™šé¤ï¼šåˆäº•", opts:[{n:"å±‹åŒé£Ÿ", k:"ì˜¥ë™ì‹", t:"app"}, {n:"çµ¦è±šçš„ç”·äºº", k:"ëˆì£¼ëŠ”ë‚¨ì", t:"walk"}, {n:"æ©‹æ‘ç‚¸é›", k:"êµì´Œì¹˜í‚¨", t:"walk"}] },
                    { time:"20:00", title:"æ±å¤§é–€æ‰¹ç™¼", desc:"è¶Šæ™šè¶Šç†±é¬§", map:"apM PLACE", tags:["apM PLACE", "nuZZon"] }
                ]
            },
            { 
                d: 3, date: "1/27 (äºŒ)", title: "è¿‘éƒŠ & å—å±±",
                guide: "<li><strong>ä¿æš–ï¼š</strong>éƒŠå€è¶…å†·ï¼Œæš–æš–åŒ…è²¼è…³åº•ã€‚</li><li><strong>å—å±±ï¼š</strong>å›ç¨‹è‹¥ç´¯å¯å–æ¶ˆï¼Œç›´æ¥å›æ˜æ´åƒç‚¸é›ã€‚</li>",
                items: [
                    { time:"08:00", title:"é›†åˆå‡ºç™¼", desc:"å—æ€¡å³¶ / æ»‘é›ªè¡Œç¨‹" },
                    { time:"12:00", type:"meal", title:"åˆé¤", opts:[{n:"æ˜¥å·è¾£ç‚’é›æ’", k:"", t:"walk"}] },
                    { time:"20:00", type:"choice", title:"ğŸŒ™ å¤œæ™šäºŒé¸ä¸€", choices:[{n:"A æ–¹æ¡ˆ", d:"å›æ˜æ´åƒç‚¸é›", k:"BHCì¹˜í‚¨"}, {n:"B æ–¹æ¡ˆ", d:"ä¸Šå—å±±å¡”çœ‹å¤œæ™¯", k:"ë‚¨ì‚°ì„œìš¸íƒ€ì›Œ"}] }
                ]
            },
            { 
                d: 4, date: "1/28 (ä¸‰)", title: "æ±Ÿå—æ½®æµ",
                guide: "<li><strong>Supremeï¼š</strong>é€±å››æ–°å“æ—¥ï¼Œé€±ä¸‰å»å‰›å¥½ã€‚</li><li><strong>Bagelï¼š</strong>ä¸€åˆ°å³¶å±±å…ˆå»æŠ½è™Ÿç¢¼ç‰Œ (CatchTable)ã€‚</li>",
                items: [
                    { time:"11:00", title:"ç‹é·—äº­æ½®ç‰Œ", desc:"å³¶å±±å…¬åœ’å¿…é€›", map:"ìŠˆí”„ë¦¼ ë„ì‚°", tags:["Supreme", "StÃ¼ssy", "Human Made", "Haus Dosan"] },
                    { time:"13:00", type:"meal", title:"åˆé¤ï¼šå³¶å±±", opts:[{n:"London Bagel", k:"ëŸ°ë˜ë² ì´ê¸€ë®¤ì§€ì—„", t:"app"}, {n:"Gino's Pizza", k:"ì§€ë…¸ìŠ¤í”¼ì", t:"res"}, {n:"Dosan Bunsik", k:"ë„ì‚°ë¶„ì‹", t:"walk"}] },
                    { time:"14:30", type:"choice", title:"ğŸ›ï¸ ä¸‹åˆäºŒé¸ä¸€", choices:[{n:"A æ–¹æ¡ˆ", d:"ç•™åœ¨å³¶å±±åƒ Nudake", k:"ëˆ„ë°ì´í¬"}, {n:"B æ–¹æ¡ˆ", d:"å»è–æ°´æ´é€› Dior", k:"ì„±ìˆ˜ë™"}] },
                    { time:"18:00", type:"meal", title:"æ™šé¤å›æ˜æ´", opts:[{n:"å…ƒå ‚é¦¬éˆ´è–¯æ¹¯", k:"ì›ë‹¹ê°ìíƒ•", t:"walk"}]}
                ]
            },
            { 
                d: 5, date: "1/29 (å››)", title: "å‹•ç‰©åœ’ & ç¾ä»£",
                guide: "<li><strong>é€€ç¨…ï¼š</strong>ç¾ä»£ç™¾è²¨6Fæœ‰é€€ç¨…æ©Ÿï¼Œè²·å®Œç›´æ¥é€€ã€‚</li><li><strong>Zoolungï¼š</strong>è¨˜å¾—æ‹¿é›†ç« æ‰‹å†Šã€‚</li>",
                items: [
                    { time:"10:30", title:"Zoolung Zoolung", desc:"æ°¸ç™»æµ¦å®¤å…§å‹•ç‰©åœ’", map:"ì£¼ë ì£¼ë  ì˜ë“±í¬" },
                    { time:"12:30", type:"meal", title:"åˆé¤ï¼šå•†å ´å…§", opts:[{n:"é¼æ³°è±", k:"ë”˜íƒ€ì´í‘", t:"res"}, {n:"Shake Shack", k:"ì‰ì´í¬ì‰‘", t:"walk"}] },
                    { time:"15:00", title:"ç¾ä»£ç™¾è²¨", desc:"æ±çŸ£å³¶ B2æ½®ç‰Œ", map:"ë”í˜„ëŒ€ ì„œìš¸", brands:["Matin Kim", "Marithe", "Covernat"] },
                    { time:"19:00", type:"meal", title:"æ™šé¤ï¼šç™¾è²¨å…§", opts:[{n:"Eataly", k:"ì´íƒˆë¦¬", t:"res"}, {n:"SMT Lounge", k:"SMTë¼ìš´ì§€", t:"res"}] }
                ]
            },
            { 
                d: 6, date: "1/30 (äº”)", title: "ç›Šå–„æ´ & æ¡è³¼",
                guide: "<li><strong>æ£‰è¢«ï¼š</strong>è«‹è€é—† Vacuum (çœŸç©ºå£“ç¸®)ï¼Œé«”ç©å‰©1/3ã€‚</li><li><strong>æ¨‚å¤©ï¼š</strong>å¯ç›´æ¥é€€ç¨…ä¸¦è£ç®±ã€‚</li>",
                items: [
                    { time:"10:00", title:"ç›Šå–„æ´", desc:"éŸ“å±‹å’–å•¡å»³æ•£ç­–", map:"ìµì„ ë™" },
                    { time:"12:00", type:"meal", title:"åˆé¤å¿…åƒ", opts:[{n:"JoJo è›¤èœŠéºµ", k:"ì¡°ì¡°ì¹¼êµ­ìˆ˜ ì‹œì²­ì ", t:"tip", tip:"å¿…åƒ"}, {n:"å¯Œæ‘ç”Ÿæ‹Œç‰›è‚‰", k:"ë¶€ì´Œìœ¡íšŒ", t:"walk"}] },
                    { time:"13:30", title:"å»£è—å¸‚å ´", desc:"æ£‰è¢« (çœŸç©ºå£“ç¸®)", map:"ê´‘ì¥ì‹œì¥" },
                    { time:"14:30", title:"æ¨‚å¤©è¶…å¸‚", desc:"é¦–çˆ¾ç«™æ¡è³¼", map:"ë¡¯ë°ë§ˆíŠ¸ ì„œìš¸ì—­ì " },
                    { time:"19:00", type:"meal", title:"æ™šé¤ï¼šä¸€éš»é›", opts:[{n:"é™³ç‰è¯å¥¶å¥¶", k:"ì§„ì˜¥í™”í• ë§¤ì›ì¡°ë‹­í•œë§ˆë¦¬", t:"walk"}] }
                ]
            },
            { 
                d: 7, date: "1/31 (å…­)", title: "å›å®¶",
                guide: "<li><strong>æ©Ÿå ´ï¼š</strong>äººå¤šï¼Œå»ºè­°ææ—©3å°æ™‚åˆ°ã€‚</li><li><strong>æè²¨ï¼š</strong>å®‰æª¢å¾Œå»é ˜å…ç¨…å“ï¼Œéœ€é ç•™æ™‚é–“ã€‚</li>",
                items: [
                    { time:"08:30", title:"Check-out", desc:"æ­æ©Ÿå ´å·´å£«å‰å¾€ä»å·" },
                    { time:"11:00", title:"é ˜å–å…ç¨…å“", desc:"å…¥é—œå¾Œé ˜å–" },
                    { time:"12:00", title:"èµ·é£› CI0165", desc:"å¹³å®‰å›å®¶" }
                ]
            }
        ];

        const KOREAN = [
            {t:"ä½ å¥½", k:"ì•ˆë…•í•˜ì„¸ìš”", p:"å®‰å¦å“ˆã„™ã„Ÿå‘¦"}, {t:"è¬è¬", k:"ê°ì‚¬í•©ë‹ˆë‹¤", p:"åº·æ’’å“ˆå’ªæ­"},
            {t:"é€™å€‹", k:"ì´ê±° ì£¼ì„¸ìš”", p:"ä¼Šå‹¾ æœ±ã„™ã„Ÿå‘¦"}, {t:"å¤šå°‘éŒ¢", k:"ì–¼ë§ˆì˜ˆìš”?", p:"æ­ç¢¼è€¶å‘¦"},
            {t:"å»æ‰€", k:"í™”ì¥ì‹¤", p:"åŒ–å¦å®¤?"}, {t:"è«‹çµ¦æˆ‘æ°´", k:"ë¬¼ ì¢€ ì£¼ì„¸ìš”", p:"ç›®å“© æœ±ã„™ã„Ÿå‘¦"}
        ];

        let rate = 0.024;
        let activeDay = 0;

        function init() {
            renderPlan();
            renderGuide();
            fetchWeather();
            fetchRate();
            
            // æ¢å¾©ä¸Šæ¬¡ç€è¦½æ—¥æœŸ
            try {
                const saved = localStorage.getItem('dayIdx');
                if(saved) selectDay(parseInt(saved), document.querySelectorAll('.chip')[parseInt(saved)]);
            } catch(e){}
        }

        function renderPlan() {
            const slider = document.getElementById('day-slider');
            slider.innerHTML = ITINERARY.map((d, i) => `
                <div class="chip ${i===0?'active':''}" onclick="selectDay(${i}, this)">
                    <div class="chip-lbl">Day ${d.d}</div>
                    <div class="chip-val">${d.date.split(' ')[0]}</div>
                </div>
            `).join('');
            renderDayContent(0);
        }

        function selectDay(idx, el) {
            if(!el) return;
            activeDay = idx;
            document.querySelectorAll('.chip').forEach(c => c.classList.remove('active'));
            el.classList.add('active');
            el.scrollIntoView({behavior:'smooth', block:'nearest', inline:'center'});
            try { localStorage.setItem('dayIdx', idx); } catch(e){}
            
            const con = document.getElementById('day-content');
            con.style.opacity = 0;
            setTimeout(() => {
                renderDayContent(idx);
                con.style.opacity = 1;
            }, 150);
        }

        function renderDayContent(idx) {
            const data = ITINERARY[idx];
            let html = `<div style="padding:0 4px 20px;">
                <div style="font-size:22px; font-weight:700; color:var(--text-main); margin-bottom:4px;">${data.title}</div>
                <div style="font-size:13px; color:var(--text-sub);">${data.date}</div>
            </div>`;
            
            if(data.guide) {
                html += `<div class="guide-note"><div class="guide-title"><i class="fa-solid fa-lightbulb"></i> å°ç­†è¨˜</div><ul class="guide-content" style="list-style:none; padding:0; margin:0;">${data.guide}</ul></div>`;
            }
            
            data.items.forEach(ev => {
                if(ev.type === 'meal') {
                    html += `<div class="card">
                        <div class="card-header"><div class="card-title"><i class="fa-solid fa-utensils" style="color:#ddd; margin-right:8px; font-size:14px;"></i>${ev.title}</div><div class="card-time">${ev.time}</div></div>
                        <div style="background:var(--bg); border-radius:12px; overflow:hidden;">
                            ${ev.opts.map(o => {
                                const cls = o.t==='app'?'b-app':(o.t==='res'?'b-res':(o.t==='tip'?'b-tip':'b-walk'));
                                const txt = o.t==='app'?'App':(o.t==='res'?'é ç´„':(o.t==='tip'?'å¿…åƒ':'æ’éšŠ'));
                                return `<a href="https://m.map.naver.com/search2/search.naver?query=${o.k}" target="_blank" class="list-item">
                                    <span class="item-name">${o.n}</span>
                                    <div style="display:flex;align-items:center;"><span class="badge ${cls}">${txt}</span><div class="btn-naver" style="margin-left:8px;"><i class="fa-solid fa-location-arrow"></i></div></div>
                                </a>`;
                            }).join('')}
                        </div>
                    </div>`;
                } else if(ev.type === 'choice') {
                     html += `<div class="card" style="border:2px dashed var(--border); background:#FAFAFA;">
                        <div style="text-align:center; font-weight:700; color:var(--primary); margin-bottom:12px;">${ev.title}</div>
                        <div class="choice-group" style="display:flex; flex-direction:column; gap:8px;">
                            ${ev.choices.map((c, i) => `
                            <a href="https://m.map.naver.com/search2/search.naver?query=${c.k}" target="_blank" class="list-item" style="background:var(--surface); border:1px solid var(--border);">
                                <div><span class="badge" style="background:${i===0?'var(--text-main)':'var(--primary)'; color:white; margin-right:6px;">${c.n}</span> <span class="item-name">${c.d}</span></div>
                                <i class="fa-solid fa-chevron-right" style="font-size:10px; color:#ccc;"></i>
                            </a>`).join('')}
                        </div>
                    </div>`;
                } else {
                    html += `<div class="card">
                        <div class="card-header">
                            <div class="card-title">${ev.title}</div>
                            <div style="display:flex; gap:8px; align-items:center;">
                                <div class="card-time">${ev.time}</div>
                                ${ev.map ? `<a href="https://m.map.naver.com/search2/search.naver?query=${ev.map}" target="_blank" class="btn-naver"><i class="fa-solid fa-location-arrow"></i></a>` : ''}
                            </div>
                        </div>
                        <div class="card-desc">${ev.desc}</div>
                        ${ev.brands ? `<div class="brands"><div class="brand-label">SHOPPING</div>${ev.brands.map(b=>`<span class="brand-tag">${b}</span>`).join('')}</div>` : ''}
                    </div>`;
                }
            });
            document.getElementById('day-content').innerHTML = html;
        }

        function renderGuide() {
            const grid = document.getElementById('korean-grid');
            grid.innerHTML = KOREAN.map(k => `
                <div class="k-card" onclick="modal('${k.k}','${k.p}')">
                    <div class="k-big">${k.t}</div>
                    <div class="k-sub">${k.p}</div>
                </div>
            `).join('');
        }

        function formatInput(el) {
            let val = el.value.replace(/[^0-9]/g, '');
            if(!val) { el.value = ''; return; }
            el.value = parseInt(val).toLocaleString();
        }

        function calculate() {
            const raw = document.getElementById('calc-in').value.replace(/,/g, '');
            const val = parseFloat(raw);
            if(!val || isNaN(val)) {
                document.getElementById('res-twd').innerText = '0';
                document.getElementById('res-tax').innerText = '0';
                return;
            }
            document.getElementById('res-twd').innerText = Math.round(val * rate).toLocaleString();
            let r = 0;
            if(val>=30000 && val<50000) r=1500;
            else if(val>=50000 && val<75000) r=3500;
            else if(val>=75000 && val<100000) r=5000;
            else if(val>=100000) r=Math.floor(val*0.06);
            document.getElementById('res-tax').innerText = 'â‚© ' + r.toLocaleString();
        }

        // APIs
        async function fetchWeather() {
            try {
                const res = await fetch('https://api.open-meteo.com/v1/forecast?latitude=37.56&longitude=126.97&current=temperature_2m,weather_code&timezone=Asia%2FSeoul');
                const d = await res.json();
                const t = Math.round(d.current.temperature_2m);
                let icon = 'sun';
                if(d.current.weather_code > 2) icon='cloud';
                if(d.current.weather_code >= 50) icon='umbrella';
                document.getElementById('w-widget').innerHTML = `<i class="fa-solid fa-${icon} text-primary"></i> <span>é¦–çˆ¾ ${t}Â°C</span>`;
            } catch(e) {
                document.getElementById('w-widget').innerHTML = `<span>é¦–çˆ¾ 2026</span>`;
            }
        }

        async function fetchRate() {
            try {
                const res = await fetch('https://api.exchangerate-api.com/v4/latest/KRW');
                const d = await res.json();
                if(d.rates.TWD) {
                    rate = d.rates.TWD;
                    document.getElementById('rate-disp').innerText = rate.toFixed(4);
                }
            } catch(e) {}
        }

        function setView(id, btn) {
            ['plan','calc','guide'].forEach(v => document.getElementById('view-'+v).classList.add('hidden'));
            document.getElementById('view-'+id).classList.remove('hidden');
            document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
            window.scrollTo(0,0);
        }

        function modal(big, sub) {
            document.getElementById('m-big').innerText = big;
            document.getElementById('m-sub').innerText = sub;
            document.getElementById('modal').style.display = 'flex';
        }
        function closeModal() {
            document.getElementById('modal').style.display = 'none';
        }

        window.onload = init;
    </script>
</body>
</html>


